"use strict";(self.webpackChunkperfect_taxi=self.webpackChunkperfect_taxi||[]).push([[412],{412:(e,a,s)=>{s.r(a),s.d(a,{MyContext:()=>X,default:()=>U});var i=s(9379),t=s(5043),l=s(3216),n=s(9942),r=s(579);const c=()=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"spinner-container",children:(0,r.jsx)("div",{className:"sloy",children:(0,r.jsx)("span",{className:"loader"})})})});var d=s(9722),o=s(5063);const m=()=>{const[e,a]=(0,t.useState)([]),[s,i]=(0,t.useState)(null),[l,m]=(0,t.useState)([]),[h,u]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(!localStorage.getItem("token"))return;const e=new o.w3cwebsocket("wss://api.adataxi.uz/ws/client/?token=".concat(localStorage.getItem("token")));i(e)}),[]),(0,t.useEffect)((()=>{navigator.geolocation.getCurrentPosition((e=>{const{latitude:a,longitude:s}=e.coords;u({lat:a,lng:s})})),d.A.get("https://api.adataxi.uz/api/v1/site/statistics/").then((e=>{a(e.data[0])}))}),[]),(0,t.useEffect)((()=>{s&&(s.onmessage=e=>{var a;const s=JSON.parse(e.data);if(-35===(null===(a=s.message)||void 0===a?void 0:a.code))return localStorage.removeItem("token"),localStorage.removeItem("userId"),void(window.location.pathname="/");"driver_location"===s.action&&m(s.message)})}),[s]);const{isLoaded:x}=(0,n.RH)({googleMapsApiKey:"AIzaSyBEN2azIRg6YCHa-tV8yAEUJoHsn__fRBM"}),v=(0,t.useMemo)((()=>({disableDefaultUI:!1,clickableIcons:!1})),[]);if(!x)return(0,r.jsx)(c,{});return(0,r.jsxs)("div",{className:"admin-home-container",children:[(0,r.jsxs)("div",{className:"header-side",children:[(0,r.jsxs)("div",{className:"statistic-card",children:[(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)("img",{src:"./images/admin/driver.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Haydovchilar soni:"}),(0,r.jsx)("div",{className:"count",children:e.drivers})]}),(0,r.jsxs)("div",{className:"statistic-card",children:[(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)("img",{src:"./images/admin/user.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Mijozlar soni:"}),(0,r.jsx)("div",{className:"count",children:e.clients})]}),(0,r.jsxs)("div",{className:"statistic-card",children:[(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)("img",{src:"./images/admin/handshake.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Hamkorlar soni:"}),(0,r.jsx)("div",{className:"count",children:e.avilable_drivers})]}),(0,r.jsxs)("div",{className:"statistic-card",children:[(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)("img",{src:"./images/admin/shopping-list.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Yakunlangan soni:"}),(0,r.jsx)("div",{className:"count",children:e.rides})]})]}),(0,r.jsx)("div",{className:"map",children:(0,r.jsx)(n.u6,{zoom:5,center:h,options:v,mapContainerClassName:"map-container",children:l.latitude&&l.longitude&&(0,r.jsx)(n.X0,{position:{lat:l.latitude,lng:l.longitude},icon:{url:"./images/admin/driver-icon.png",scaledSize:{width:45,height:45}}})})})]})};var h=s(5475),u=s(4978),x=s(2457),v=s(4117);const g=()=>{const{t:e}=(0,v.Bd)();(0,t.useContext)(X);const a=(0,l.Zp)(),[s,n]=(0,t.useState)(!1);(0,t.useEffect)((()=>{}),[]);const c=[{code:"uz",name:"O'zbek tili",country_code:"uz"},{code:"en",name:"English language",country_code:"en"},{code:"ru",name:"P\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",country_code:"ru"}];return(0,r.jsxs)("div",{className:"admin-home",children:[(0,r.jsxs)("div",{className:"left-box ".concat(s?"":"hide-left"),children:[(0,r.jsx)("div",{className:"logo ".concat(s?"":"hide-logo"),children:(0,r.jsx)("img",{onClick:()=>a("/"),src:"../images/logo2.png",alt:""})}),(0,r.jsx)("div",{className:"admin-navbar",children:[{name:"Dashboard",url:"/",img:"../images/admin/dashboard.png"},{name:"Haydovchilar",url:"/drivers",img:"../images/admin/driver.png"},{name:"Mijozlar",url:"/clients",img:"../images/admin/user.png"},{name:"Buyurtmalar",url:"/orders",img:"../images/admin/shopping-list.png"},{name:"Moshina brendi",url:"/car-brands",img:"../images/admin/car.png"},{name:"Moshina modeli",url:"/car-models",img:"../images/admin/car.png"},{name:"Ranglar",url:"/colors",img:"../images/admin/palette.png"},{name:"Narxlar",url:"/price",img:"../images/admin/price-list.png"},{name:"Qo'shimcha xizmatlar",url:"/extra-services",img:"../images/admin/technical-service.png"},{name:"Bekor qilish sababi",url:"/reject-reason",img:"../images/admin/rejected.png"}].map(((e,a)=>(0,r.jsxs)(h.k2,{to:e.url,className:"nav-item ".concat((e=>{let{isActive:a}=e;return a?"active":""})),children:[(0,r.jsx)("img",{src:e.img,alt:""}),s?(0,r.jsx)("span",{children:e.name}):""]},a)))}),(0,r.jsx)("div",{onClick:()=>n(!s),className:"circle ".concat(s?"":"circle-rotate"),children:(0,r.jsx)("img",{src:"../images/admin/previous.png",alt:""})})]}),(0,r.jsxs)("div",{className:"right-box ".concat(s?"":"show-right"),children:[(0,r.jsxs)("div",{className:"top-box",children:[(0,r.jsx)("div",{className:"languge",children:(0,r.jsxs)(x.A,{children:[(0,r.jsxs)(x.A.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,r.jsx)("img",{className:"globe",src:"./images/globe-alt.webp",alt:"language",loading:"lazy"}),(0,r.jsx)("div",{className:"name",children:c.map(((e,a)=>(0,r.jsx)("div",{children:u.Ay.language===e.code?e.name:""},a)))})]}),(0,r.jsx)(x.A.Menu,{children:c.map((e=>{let{code:a,name:s,country_code:i}=e;return(0,r.jsx)(x.A.Item,{onClick:()=>(e=>{localStorage.setItem("lng",e),u.Ay.changeLanguage(e)})(a),children:s},i)}))})]})}),(0,r.jsx)("div",{className:"title",children:(0,r.jsx)("img",{src:"./images/logo.png",alt:""})}),(0,r.jsx)("div",{className:"icons",children:(0,r.jsx)("div",{onClick:()=>{window.location.pathname="/",localStorage.removeItem("admin"),localStorage.removeItem("token")},className:"exit",children:(0,r.jsx)("img",{src:"./images/admin/logout.png",alt:""})})})]}),(0,r.jsx)("div",{className:"bottom-box",children:(0,r.jsx)(l.BV,{children:J.map(((e,a)=>(0,r.jsx)(l.qh,(0,i.A)({},e),a)))})})]})]})},j=(e,a)=>{(0,t.useEffect)((()=>{const s=s=>{s.key===a&&e()};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}}),[e,a])},p=()=>{let e=(0,t.useContext)(X);(0,l.Zp)();const[a,s]=(0,t.useState)(""),[i,n]=(0,t.useState)(""),c=()=>{if(a.trim().length>0&&i.trim().length>0){let s={username:a,password:i};d.A.post("".concat(e.url,"/dashboard/login/"),s).then((e=>{localStorage.setItem("admin",e.data.user),localStorage.setItem("token",e.data.token),window.location.pathname="/",localStorage.setItem("lng","uz")})).catch((e=>{404===e.response.status&&alert("Bu foydalanuvchi topilmadi")}))}else alert("Formani to'ldiring")};return j(c,"Enter"),j((()=>{s(""),n("")}),"Delete"),(0,r.jsx)("div",{className:"login-container",children:(0,r.jsxs)("div",{className:"login-card",children:[(0,r.jsx)("div",{className:"logo",children:(0,r.jsx)("img",{src:"./images/logo.png",alt:""})}),(0,r.jsxs)("div",{className:"input_box",children:[(0,r.jsx)("input",{value:a,onChange:e=>s(e.target.value),placeholder:"Username",type:"text"}),(0,r.jsx)("input",{value:i,onChange:e=>n(e.target.value),placeholder:"Password",type:"password"})]}),(0,r.jsx)("div",{onClick:c,onKeyUp:()=>console.log("enter"),className:"btn-login",children:"Kirish"})]})})};var N=s(275),_=s(3892),b=s(2157),k=s.n(b),A=s(5795),f=s(7561),C=s(9190),y=s(6979),z=s(6990),S=s(9859),w=s(3217),q=s(7517);const T=()=>(0,r.jsx)("div",{className:"loader-admin",children:(0,r.jsxs)("div",{className:"lds-spinner",children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{})]})}),R=()=>{const{t:e}=(0,v.Bd)();let a=(0,t.useContext)(X);const[s,i]=(0,t.useState)({show:!1,status:!1}),l=(0,t.useRef)(null),n=(0,t.useRef)(null),[c,o]=(0,t.useState)(""),[m,h]=(0,t.useState)(null),[x,g]=(0,t.useState)([]),[j,p]=(0,t.useState)([]),[b,R]=(0,t.useState)(""),[I,F]=(0,t.useState)(""),[M,B]=(0,t.useState)(!1),[W,L]=(0,t.useState)([]),[E,Q]=(0,t.useState)([]),[P,H]=(0,t.useState)([]),[V,Y]=(0,t.useState)("male"),[D,O]=(0,t.useState)(null),[J,K]=(0,t.useState)([]),[U,Z]=(0,t.useState)([]),[G,$]=(0,t.useState)([]),[ee,ae]=(0,t.useState)([]),[se,ie]=(0,t.useState)([]),[te,le]=(0,t.useState)([]),[ne,re]=(0,t.useState)([]),[ce,de]=(0,t.useState)([]),[oe,me]=(0,t.useState)([]),[he,ue]=(0,t.useState)([]),[xe,ve]=(0,t.useState)([]),ge={PaperProps:{style:{maxHeight:224,width:250}}},[je,pe]=(0,t.useState)(0),Ne=100*je,_e=Math.ceil(j.length/100),be=(0,_.Wx)({initialValues:{phone:"",first_name:"",last_name:"",birth_date:"",car_number:"",car_color:"",car_make:"",car_model:"",extra_services:[],seat_count:"",from_region:"",to_region:""},validate:e=>{const a={};return e.first_name||(a.first_name="Required"),e.last_name||(a.last_name="Required"),e.phone||(a.phone="Required"),e.car_model||(a.car_model="Required"),e.car_color||(a.car_color="Required"),e.car_make||(a.car_make="Required"),e.car_number||(a.car_number="Required"),e.extra_services||(a.extra_services="Required"),e.seat_count||(a.seat_count="Required"),e.from_region||(a.from_region="Required"),e.to_region||(a.to_region="Required"),a},onSubmit:e=>{Ce()}});(0,t.useEffect)((()=>{ke(),d.A.get("".concat(a.url,"/dashboard/carcategory/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{ue(e.data)})),d.A.get("".concat(a.url,"/dashboard/carservice/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{ve(e.data)})),d.A.get("".concat(a.url,"/dashboard/carmake/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{ie(e.data)})),d.A.get("".concat(a.url,"/dashboard/carcolor/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{re(e.data)})),d.A.get("".concat(a.url,"/dashboard/extraservices/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{me(e.data)})),d.A.get("".concat(a.url,"/dashboard/region/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{H(e.data)}))}),[]);const ke=()=>{B(!0),d.A.get("".concat(a.url,"/dashboard/driver/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{p(e.data)})).catch((e=>{console.log(e)})).finally((()=>{B(!1)}))},Ae=e=>{d.A.get("".concat(a.url,"/dashboard/carmake/").concat(e,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{le(e.data)}))},fe=e=>{const a=e.target.files[0];O(a)},Ce=()=>{const e=new FormData;let s={role:"driver",first_name:be.values.first_name,last_name:be.values.last_name,phone:be.values.phone,gender:V,is_verified:!0,is_confirmed:!0},t={car_make:be.values.car_make,car_model:be.values.car_model,car_color:be.values.car_color,car_number:be.values.car_number,seat_count:be.values.seat_count,birth_date:be.values.birth_date,extra_services:be.values.extra_services,from_region:be.values.from_region,to_region:be.values.to_region};for(let a in s)e.append(a,s[a]);for(let a in t)Array.isArray(t[a])?t[a].forEach((s=>{e.append("driver.".concat(a),s)})):e.append("driver.".concat(a),t[a]);D&&e.append("profile_image",D),b||d.A.post("".concat(a.url,"/dashboard/driver/"),e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{i({status:"",show:!1}),ke(),be.resetForm()})),b&&d.A.patch("".concat(a.url,"/dashboard/driver/").concat(b,"/"),e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{i({status:"",show:!1}),ke(),be.resetForm()}))},ye=e=>{"block"===e&&I.trim().length>0?d.A.post("".concat(a.url,"/dashboard/driver/block-driver/"),{driver_id:b,reason:I},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{i({status:"",show:!1}),ke(),F("")})):alert("Bloklash sababini kiriting!"),"unblock"===e&&d.A.post("".concat(a.url,"/dashboard/driver/unblock-driver/"),{driver_id:b},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{i({status:"",show:!1}),ke()}))},ze=e=>{i({show:!0,status:"car-photos"}),R(e),d.A.post("".concat(a.url,"/dashboard/driver/car-images/"),{driver_id:e},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{Z(e.data)})).catch((e=>{console.log(e)}))},Se=e=>{i({show:!0,status:"car-docs"}),R(e),d.A.post("".concat(a.url,"/dashboard/driver/document-images/"),{driver_id:e},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{ae(e.data)})).catch((e=>{console.log(e)}))},we=j.slice(Ne,Ne+100).filter((e=>{const a=c.toString().toLowerCase().replace(/\s+/g,"").replace(/\+/g,""),s=e.phone.toString().toLowerCase().replace(/\s+/g,"").replace(/\+/g,"");return""===a||s.includes(a)})).map(((e,s)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:s+1}),(0,r.jsxs)("td",{className:"driver-wrapper",children:[(0,r.jsx)("div",{className:"icon-driver",children:(0,r.jsx)("img",{onClick:()=>{i({show:!0,status:"driver-photo"}),h(e.profile_image)},src:e.profile_image,alt:""})}),(0,r.jsxs)("div",{className:"text-driver",children:[(0,r.jsx)("div",{className:"name",children:e.user_name&&e.user_name}),(0,r.jsx)("div",{className:"phone",children:e.phone&&e.phone})]})]}),(0,r.jsxs)("td",{children:[e.from_region&&e.from_region.translations[u.Ay.language].name,"--",e.to_region&&e.to_region.translations[u.Ay.language].name]}),(0,r.jsxs)("td",{children:[e.car_color&&e.car_color.translations[u.Ay.language].name,"\xa0",e.car_make&&e.car_make.translations[u.Ay.language].name," \xa0",e.car_model&&e.car_model.translations[u.Ay.language].name]}),(0,r.jsx)("td",{children:e.car_number&&e.car_number}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)("img",{onClick:()=>{return s=e.id,i({show:!0,status:"car-information"}),void d.A.get("".concat(a.url,"/dashboard/driver/").concat(s,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{g(e.data),console.log(e.data)}));var s},src:"./images/admin/sport-car.png",alt:""})})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)("img",{onClick:()=>ze(e.id),src:"./images/admin/car-photo.png",alt:""})})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)("img",{onClick:()=>Se(e.id),src:"./images/admin/document.png",alt:""})})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:e.is_confirmed?"icon-check":"icon-check disablet",children:(0,r.jsx)("img",{onClick:()=>{i({show:!0,status:"driver-service"}),R(e.id),L(e.available_services),Q(e.available_categories)},src:"./images/admin/check.png",alt:""})})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{className:e.is_block?"icon-check":"icon-check disablet",children:[(0,r.jsx)("img",{onClick:()=>{i({show:!0,status:"blocked"}),e.is_block&&F(e.reason),R(e.id)},src:"./images/admin/block.png",alt:"block"}),e.reason&&e.is_block&&(0,r.jsxs)("div",{className:"reason-block",children:[(0,r.jsx)("img",{src:"./images/admin/warning.png",alt:""}),(0,r.jsx)("div",{className:"text",children:e.reason})]})]})}),(0,r.jsx)("td",{}),(0,r.jsx)("div",{className:"edit-icon",children:(0,r.jsx)("img",{onClick:()=>{var s;i({show:!0,status:"edit-driver"}),s=e.id,d.A.get("".concat(a.url,"/dashboard/driver/").concat(s,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{be.setValues({phone:e.data.user.phone,first_name:e.data.user.first_name,last_name:e.data.user.last_name,birth_date:e.data.birth_date,car_number:e.data.car_number,car_color:e.data.car_color&&e.data.car_color.id,car_make:e.data.car_make&&e.data.car_make.id,car_model:e.data.car_model&&e.data.car_model.id,extra_services:e.data.extra_services.length>0?e.data.extra_services.map((e=>e.id)):[],seat_count:e.data.seat_count,from_region:e.data.from_region&&e.data.from_region.id,to_region:e.data.to_region&&e.data.to_region.id}),Y(e.data.user.gender),e.data.car_make&&Ae(e.data.car_make.id)})),R(s)},src:"./images/admin/edit-tools.png",alt:""})})]},s)));return(0,r.jsxs)("div",{className:"drivers-container",children:[(0,r.jsx)(N.A,{in:s.show,nodeRef:l,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,r.jsx)("div",{className:"modal-sloy",children:(0,r.jsxs)("div",{ref:l,className:"modal-card",children:["add-driver"===s.status&&(0,r.jsxs)("div",{className:"add-driver",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{i({status:"",show:!1}),be.resetForm()},src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Haydovchi qo'shish"}),(0,r.jsx)("div",{className:"title-form",children:"Haydovchi ma'lumotlari:"}),(0,r.jsxs)("div",{className:"form-container",children:[(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsxs)("div",{className:"select-sides-file",children:[(0,r.jsx)("input",{onChange:fe,type:"file"}),(0,r.jsxs)("div",{className:"sloy-image ".concat(D?"active":""),children:["Profil rasmi",(0,r.jsx)("img",{src:"./images/admin/image.png",alt:""})]})]}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===be.errors.first_name,value:be.values.first_name,onChange:be.handleChange,name:"first_name",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Ism",variant:"outlined",className:"textField"})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===be.errors.last_name,value:be.values.last_name,onChange:be.handleChange,name:"last_name",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Familiya",variant:"outlined",className:"textField"})})]}),(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===be.errors.phone,value:be.values.phone,onChange:be.handleChange,name:"phone",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Telefon raqam",variant:"outlined",className:"textField"})}),(0,r.jsxs)("div",{className:"select-sides-time",children:[(0,r.jsx)("label",{htmlFor:"",children:"Tug'ilgan sana:"}),(0,r.jsx)("input",{className:"working_time ".concat("Required"===be.errors.birth_date?"working_time_required":""),name:"birth_date",onChange:be.handleChange,value:be.values.birth_date,type:"date"})]}),(0,r.jsxs)("div",{className:"select-sides",children:[(0,r.jsx)("div",{className:"title-on",children:"Jinsi:"}),(0,r.jsxs)("div",{className:"on-of",children:[(0,r.jsx)("div",{onClick:()=>Y("male"),className:"of ".concat("male"===V?"on":""),children:"Erkak"}),(0,r.jsx)("div",{onClick:()=>Y("female"),className:"of ".concat("female"===V?"on":""),children:"Ayol"})]})]})]})]}),(0,r.jsx)("div",{className:"title-form",children:"Avtomobil ma'lumotlari:"}),(0,r.jsxs)("div",{className:"form-container",children:[(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Avtomobil modeli"}),(0,r.jsx)(y.A,{error:"Required"===be.errors.car_make,labelid:"demo-select-small-label",id:"demo-select-small",value:be.values.car_make,name:"car_make",label:"Avtomobil modeli",onChange:be.handleChange,children:se.map(((e,a)=>(0,r.jsx)(z.A,{onClick:()=>Ae(e.id),value:e.id,children:e.translations[u.Ay.language].name},a)))})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Avtomobil nomi"}),(0,r.jsx)(y.A,{error:"Required"===be.errors.car_model,labelid:"demo-select-small-label",id:"demo-select-small",value:be.values.car_model,name:"car_model",label:"Avtomobil nomi",onChange:be.handleChange,children:te.map(((e,a)=>(0,r.jsx)(z.A,{value:e.id,children:e.translations[u.Ay.language].name},a)))})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===be.errors.car_number,value:be.values.car_number,onChange:be.handleChange,name:"car_number",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Avtomobil raqami",variant:"outlined",className:"textField"})})]}),(0,r.jsxs)("div",{className:"select-box ",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Avtomobil rangi"}),(0,r.jsx)(y.A,{error:"Required"===be.errors.car_color,labelid:"demo-select-small-label",id:"demo-select-small",name:"car_color",label:"Avtomobil rangi",value:be.values.car_color,onChange:be.handleChange,children:ne.map(((e,a)=>(0,r.jsx)(z.A,{value:e.id,children:e.translations[u.Ay.language].name},a)))})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:(0,r.jsx)(A.A,{id:"seat_count",name:"seat_count",label:"O\u2018rindiqlar soni",type:"number",value:be.values.seat_count,onChange:be.handleChange,error:be.touched.seat_count&&Boolean(be.errors.seat_count),helperText:be.touched.seat_count&&be.errors.seat_count,inputProps:{min:1},fullWidth:!0,size:"small"})})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,width:"100%"},className:"selectMui",size:"small",children:[(0,r.jsx)(C.A,{id:"demo-multiple-checkbox-label",children:"Xizmatlar"}),(0,r.jsx)(y.A,{error:"Required"===be.errors.extra_services,name:"extra_services",labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:be.values.extra_services,onChange:e=>{const{value:a}=e.target;be.setFieldValue("extra_services","string"===typeof a?a.split(","):a)},input:(0,r.jsx)(S.A,{label:"Xizmatlar"}),renderValue:e=>e.map((e=>{const a=oe.find((a=>a.id===e));return a?a.translations[u.Ay.language].name:""})).join(", "),MenuProps:ge,children:oe.map((e=>(0,r.jsxs)(z.A,{value:e.id,children:[(0,r.jsx)(w.A,{checked:be.values.extra_services.includes(e.id)}),(0,r.jsx)(q.A,{primary:e.translations[u.Ay.language].name})]},e.id)))})]})})]})]}),(0,r.jsx)("div",{className:"title-form",children:"Asosan qaysi yo'nalishda harakat qilasiz:"}),(0,r.jsx)("div",{className:"form-container",children:(0,r.jsxs)("div",{className:"select-box start",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Qayerdan"}),(0,r.jsx)(y.A,{error:"Required"===be.errors.from_region,labelid:"demo-select-small-label",id:"demo-select-small",value:be.values.from_region,name:"from_region",label:"Qayerdan",onChange:be.handleChange,children:P.map(((e,a)=>(0,r.jsx)(z.A,{value:e.id,children:e.translations[u.Ay.language].name},a)))})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Qayerga"}),(0,r.jsx)(y.A,{error:"Required"===be.errors.to_region,labelid:"demo-select-small-label",id:"demo-select-small",value:be.values.to_region,name:"to_region",label:"Qayerga",onChange:be.handleChange,children:P.map(((e,a)=>(0,r.jsx)(z.A,{value:e.id,children:e.translations[u.Ay.language].name},a)))})]})})]})}),(0,r.jsx)("div",{onClick:()=>{be.handleSubmit()},className:"add-btn",children:(0,r.jsx)("img",{src:"./images/admin/add.png",alt:""})})]}),"driver-photo"===s.status&&(0,r.jsxs)("div",{className:"driver-photo",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>i({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"photo",children:(0,r.jsx)("img",{src:m,alt:""})})]}),"car-information"===s.status&&(0,r.jsxs)("div",{className:"car-information",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>i({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Avtomobil ma'lumotlari"}),x&&(0,r.jsxs)("div",{className:"information",children:[(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Tugilgan sanasi:"}),(0,r.jsx)("div",{className:"text",children:x.birth_date&&x.birth_date})]}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Jinsi:"}),(0,r.jsx)("div",{className:"text",children:x.user&&"male"===x.user.gender?"Erkak":"Ayol"})]}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Reyting:"}),(0,r.jsx)("div",{className:"text",children:x.user&&x.user.rate})]}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"O'rindiqlar soni:"}),(0,r.jsx)("div",{className:"text",children:x.seat_count&&x.seat_count})]}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Yakunlagan buyurtmalar:"}),(0,r.jsx)("div",{className:"text",children:x.user&&x.user.finished_orders_count})]}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Qo'shimcha xizmatlar:"}),(0,r.jsx)("div",{className:"text",children:x.extra_services&&x.extra_services.map(((e,a)=>(0,r.jsxs)("span",{children:[e.translations[u.Ay.language].name,","]},a)))})]})]})]}),"blocked"===s.status&&(0,r.jsxs)("div",{className:"blocked",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{i({status:"",show:!1}),F("")},src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Haydovchini bloklash"}),(0,r.jsxs)("div",{className:"reason-text",children:[(0,r.jsx)("textarea",{value:I,onChange:e=>F(e.target.value),placeholder:"Blok qilish sababini kiriting...",name:"reason",id:"reason"}),(0,r.jsxs)("div",{className:"buttons",children:[(0,r.jsx)("div",{onClick:()=>{ye("unblock")},className:"cancel",children:"Bekor qilish"}),(0,r.jsx)("div",{onClick:()=>{ye("block")},className:"success",children:"Bloklash"})]})]})]}),"edit-driver"===s.status&&(0,r.jsxs)("div",{className:"edit-driver",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{i({status:"",show:!1}),be.resetForm()},src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Haydovchi qo'shish"}),(0,r.jsx)("div",{className:"title-form",children:"Haydovchi ma'lumotlari:"}),(0,r.jsxs)("div",{className:"form-container",children:[(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsxs)("div",{className:"select-sides-file",children:[(0,r.jsx)("input",{onChange:fe,type:"file"}),(0,r.jsxs)("div",{className:"sloy-image ".concat(D?"active":""),children:["Profil rasmi",(0,r.jsx)("img",{src:"./images/admin/image.png",alt:""})]})]}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===be.errors.first_name,value:be.values.first_name,onChange:be.handleChange,name:"first_name",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Ism",variant:"outlined",className:"textField"})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===be.errors.last_name,value:be.values.last_name,onChange:be.handleChange,name:"last_name",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Familiya",variant:"outlined",className:"textField"})})]}),(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===be.errors.phone,value:be.values.phone,onChange:be.handleChange,name:"phone",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Telefon raqam",variant:"outlined",className:"textField"})}),(0,r.jsxs)("div",{className:"select-sides-time",children:[(0,r.jsx)("label",{htmlFor:"",children:"Tug'ilgan sana:"}),(0,r.jsx)("input",{className:"working_time ".concat("Required"===be.errors.birth_date?"working_time_required":""),name:"birth_date",onChange:be.handleChange,value:be.values.birth_date,type:"date"})]}),(0,r.jsxs)("div",{className:"select-sides",children:[(0,r.jsx)("div",{className:"title-on",children:"Jinsi:"}),(0,r.jsxs)("div",{className:"on-of",children:[(0,r.jsx)("div",{onClick:()=>Y("male"),className:"of ".concat("male"===V?"on":""),children:"Erkak"}),(0,r.jsx)("div",{onClick:()=>Y("famale"),className:"of ".concat("famale"===V?"on":""),children:"Ayol"})]})]})]})]}),(0,r.jsx)("div",{className:"title-form",children:"Avtomobil ma'lumotlari:"}),(0,r.jsxs)("div",{className:"form-container",children:[(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Avtomobil modeli"}),(0,r.jsx)(y.A,{error:"Required"===be.errors.car_make,labelid:"demo-select-small-label",id:"demo-select-small",value:be.values.car_make,name:"car_make",label:"Avtomobil modeli",onChange:be.handleChange,children:se.map(((e,a)=>(0,r.jsx)(z.A,{onClick:()=>Ae(e.id),value:e.id,children:e.translations[u.Ay.language].name},a)))})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Avtomobil nomi"}),(0,r.jsx)(y.A,{error:"Required"===be.errors.car_model,labelid:"demo-select-small-label",id:"demo-select-small",value:be.values.car_model,name:"car_model",label:"Avtomobil nomi",onChange:be.handleChange,children:te.map(((e,a)=>(0,r.jsx)(z.A,{value:e.id,children:e.translations[u.Ay.language].name},a)))})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===be.errors.car_number,value:be.values.car_number,onChange:be.handleChange,name:"car_number",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Avtomobil raqami",variant:"outlined",className:"textField"})})]}),(0,r.jsxs)("div",{className:"select-box ",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Avtomobil rangi"}),(0,r.jsx)(y.A,{error:"Required"===be.errors.car_color,labelid:"demo-select-small-label",id:"demo-select-small",name:"car_color",label:"Avtomobil rangi",value:be.values.car_color,onChange:be.handleChange,children:ne.map(((e,a)=>(0,r.jsx)(z.A,{value:e.id,children:e.translations[u.Ay.language].name},a)))})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:(0,r.jsx)(A.A,{id:"seat_count",name:"seat_count",label:"O\u2018rindiqlar soni",type:"number",value:be.values.seat_count,onChange:be.handleChange,error:be.touched.seat_count&&Boolean(be.errors.seat_count),helperText:be.touched.seat_count&&be.errors.seat_count,inputProps:{min:1},fullWidth:!0,size:"small"})})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,width:"100%"},className:"selectMui",size:"small",children:[(0,r.jsx)(C.A,{id:"demo-multiple-checkbox-label",children:"Xizmatlar"}),(0,r.jsx)(y.A,{error:"Required"===be.errors.extra_services,name:"extra_services",labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:be.values.extra_services,onChange:e=>{const{value:a}=e.target;be.setFieldValue("extra_services","string"===typeof a?a.split(","):a)},input:(0,r.jsx)(S.A,{label:"Xizmatlar"}),renderValue:e=>e.map((e=>{const a=oe.find((a=>a.id===e));return a?a.translations[u.Ay.language].name:""})).join(", "),MenuProps:ge,children:oe.map((e=>(0,r.jsxs)(z.A,{value:e.id,children:[(0,r.jsx)(w.A,{checked:be.values.extra_services.includes(e.id)}),(0,r.jsx)(q.A,{primary:e.translations[u.Ay.language].name})]},e.id)))})]})})]})]}),(0,r.jsx)("div",{className:"title-form",children:"Asosan qaysi yo'nalishda harakat qilasiz:"}),(0,r.jsx)("div",{className:"form-container",children:(0,r.jsxs)("div",{className:"select-box start",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Qayerdan"}),(0,r.jsx)(y.A,{error:"Required"===be.errors.from_region,labelid:"demo-select-small-label",id:"demo-select-small",value:be.values.from_region,name:"from_region",label:"Qayerdan",onChange:be.handleChange,children:P.map(((e,a)=>(0,r.jsx)(z.A,{value:e.id,children:e.translations[u.Ay.language].name},a)))})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Qayerga"}),(0,r.jsx)(y.A,{error:"Required"===be.errors.to_region,labelid:"demo-select-small-label",id:"demo-select-small",value:be.values.to_region,name:"to_region",label:"Qayerga",onChange:be.handleChange,children:P.map(((e,a)=>(0,r.jsx)(z.A,{value:e.id,children:e.translations[u.Ay.language].name},a)))})]})})]})}),(0,r.jsx)("div",{onClick:()=>{be.handleSubmit()},className:"add-btn",children:(0,r.jsx)("img",{src:"./images/admin/checkmark.png",alt:""})})]}),"driver-service"===s.status&&(0,r.jsxs)("div",{className:"driver-service",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>i({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsxs)("div",{className:"bottom-side",children:[(0,r.jsxs)("div",{className:"left-side",children:[(0,r.jsx)("div",{className:"title",children:"Yo'nalish"}),(0,r.jsx)("div",{className:"form-wrapper",children:xe.map(((e,a)=>(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{onChange:()=>{return a=e.id,void L((e=>e.includes(a)?e.filter((e=>e!==a)):[...e,a]));var a},checked:W.includes(e.id),type:"checkbox",name:"agree"}),e.translations[u.Ay.language].name]},a)))})]}),(0,r.jsxs)("div",{className:"right-side",children:[(0,r.jsx)("div",{className:"title",children:"Tariflar"}),(0,r.jsx)("div",{className:"form-wrapper",children:he.map(((e,a)=>(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{onChange:()=>{return a=e.id,void Q((e=>e.includes(a)?e.filter((e=>e!==a)):[...e,a]));var a},checked:E.includes(e.id),type:"checkbox",name:"agree"}),e.translations[u.Ay.language].name]},a)))})]})]}),(0,r.jsx)("div",{onClick:()=>{let e={driver_id:b,available_services:W,available_categories:E};d.A.post("".concat(a.url,"/dashboard/driver/confirm-driver/"),e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{ke(),i({status:"",show:!1})}))},className:"btn-success",children:"Tasdiqlash"})]}),"car-photos"===s.status&&(0,r.jsxs)("div",{className:"car-photos",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>i({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Avtomobil rasmlari"}),(0,r.jsxs)("div",{className:"form-wrapper",children:[U.map(((e,s)=>(0,r.jsxs)("div",{className:"photo",children:[(0,r.jsx)("img",{src:e.image,alt:"car-".concat(s)}),(0,r.jsx)("div",{className:"del-icon",onClick:()=>{return s=e.id,void d.A.post("".concat(a.url,"/dashboard/driver/delete-car-image/"),{driver_car_image:s},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{ze(b)}));var s},children:(0,r.jsx)("img",{src:"./images/admin/delete.png",alt:"delete"})})]},s))),J.map(((e,a)=>(0,r.jsxs)("div",{className:"photo",children:[(0,r.jsx)("img",{src:e.preview,alt:"car-".concat(a)}),(0,r.jsx)("div",{className:"del-icon",onClick:()=>(e=>{K((a=>a.filter(((a,s)=>s!==e))))})(a),children:(0,r.jsx)("img",{src:"./images/admin/delete.png",alt:"delete"})})]},a))),(0,r.jsxs)("div",{className:"add-icon",children:[(0,r.jsx)("input",{onChange:e=>{const a=e.target.files[0];if(a){const e=new FileReader;e.onloadend=()=>{K((s=>[...s,{preview:e.result,file:a}]))},e.readAsDataURL(a)}e.target.value=null},type:"file"}),(0,r.jsx)("img",{src:"./images/admin/image.png",alt:""})]})]}),(0,r.jsx)("div",{onClick:()=>{const e=new FormData;e.append("driver",b),J.forEach(((a,s)=>{e.append("car_images",a.file)})),d.A.post("".concat(a.url,"/dashboard/driver/update-image/"),e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{i({status:"",show:!1}),K([])}))},className:"btn-success",children:"Tasdiqlash"})]}),"car-docs"===s.status&&(0,r.jsxs)("div",{className:"car-docs",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>i({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Xujjatlar rasmlari"}),(0,r.jsxs)("div",{className:"form-wrapper",children:[ee.map(((e,s)=>(0,r.jsxs)("div",{className:"photo",children:[(0,r.jsx)("img",{src:e.image,alt:"car-".concat(s)}),(0,r.jsx)("div",{className:"del-icon",onClick:()=>{return s=e.id,void d.A.post("".concat(a.url,"/dashboard/driver/delete-document-image/"),{driver_document_image:s},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{Se(b)}));var s},children:(0,r.jsx)("img",{src:"./images/admin/delete.png",alt:"delete"})})]},s))),G.map(((e,a)=>(0,r.jsxs)("div",{className:"photo",children:[(0,r.jsx)("img",{src:e.preview,alt:"car-".concat(a)}),(0,r.jsx)("div",{className:"del-icon",onClick:()=>(e=>{$((a=>a.filter(((a,s)=>s!==e))))})(a),children:(0,r.jsx)("img",{src:"./images/admin/delete.png",alt:"delete"})})]},a))),(0,r.jsxs)("div",{className:"add-icon",children:[(0,r.jsx)("input",{onChange:e=>{const a=e.target.files[0];if(a){const e=new FileReader;e.onloadend=()=>{$((s=>[...s,{preview:e.result,file:a}]))},e.readAsDataURL(a)}e.target.value=null},type:"file"}),(0,r.jsx)("img",{src:"./images/admin/image.png",alt:""})]})]}),(0,r.jsx)("div",{onClick:()=>{const e=new FormData;e.append("driver",b),G.forEach(((a,s)=>{e.append("document_images",a.file)})),d.A.post("".concat(a.url,"/dashboard/driver/update-image/"),e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{i({status:"",show:!1}),K([]),$([])}))},className:"btn-success",children:"Tasdiqlash"})]})]})})}),(0,r.jsxs)("div",{className:"header",children:[(0,r.jsxs)("div",{className:"search-box",children:[(0,r.jsx)("img",{src:"./images/admin/search.png",alt:""}),(0,r.jsx)("input",{onChange:e=>o(e.target.value),placeholder:"Telefon raqam kiriting",type:"text"})]}),(0,r.jsx)("div",{onClick:()=>{i({show:!0,status:"add-driver"})},className:"add-driver-btn",children:"Haydovchi qo'shish"})]}),M?(0,r.jsx)(T,{}):(0,r.jsx)("div",{className:"table-wrapper",children:(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"\u2116"}),(0,r.jsx)("th",{children:"Haydovchi haqida"}),(0,r.jsx)("th",{children:"Yo'nalish"}),(0,r.jsx)("th",{children:"Mashina"}),(0,r.jsx)("th",{children:"Mashina raqami"}),(0,r.jsx)("th",{children:"Moshina ma'lumotlari"}),(0,r.jsx)("th",{children:"Moshina rasmlari"}),(0,r.jsx)("th",{children:"Dokument rasmlari"}),(0,r.jsx)("th",{children:"Tasdiqlash"}),(0,r.jsx)("th",{children:"Bloklash"}),(0,r.jsx)("th",{})]})}),(0,r.jsx)("tbody",{children:we})]})}),(0,r.jsx)("div",{className:"pagination",children:j.length>100?(0,r.jsx)(k(),{breakLabel:"...",previousLabel:(0,r.jsx)("img",{src:"./images/admin/prev.png",alt:""}),nextLabel:(0,r.jsx)("img",{src:"./images/admin/next.png",alt:""}),pageCount:_e,onPageChange:e=>{let{selected:a}=e;pe(a),setTimeout((()=>{var e;null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)},containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledCalassName:"paginationDisabled",activeClassName:"paginationActive"}):""})]})},I=()=>{let e=(0,t.useContext)(X);const a=(0,t.useRef)(null),[s,i]=(0,t.useState)([]),[l,n]=(0,t.useState)(),[c,o]=(0,t.useState)(null),[m,h]=(0,t.useState)(""),[u,x]=(0,t.useState)("");(0,t.useEffect)((()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight),d.A.get("".concat(e.url,"/dashboard/admin-chat/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{i(e.data)}))}));return(0,r.jsxs)("div",{className:"chat-driver",children:[(0,r.jsxs)("div",{className:"left",children:[(0,r.jsx)("div",{className:"header",children:(0,r.jsxs)("div",{className:"search-box",children:[(0,r.jsx)("img",{src:"./images/admin/search.png",alt:""}),(0,r.jsx)("input",{value:u,onChange:e=>x(e.target.value),placeholder:"Telefon raqam kiriting",type:"text"})]})}),(0,r.jsx)("div",{className:"drivers-box",children:s.filter((e=>{const a=u.toString().toLowerCase().replace(/\s+/g,"").replace(/\+/g,""),s=e.user_phone.toString().toLowerCase().replace(/\s+/g,"").replace(/\+/g,"");return""===a||s.includes(a)})).map(((a,s)=>(0,r.jsxs)("div",{className:"driver ".concat(c&&c.id===a.id?"active":""),children:[(0,r.jsx)("div",{className:"photo",children:(0,r.jsx)("img",{src:"./images/admin/user2.png",alt:""})}),(0,r.jsxs)("div",{onClick:()=>(a=>{o(a),d.A.get("".concat(e.url,"/dashboard/admin-chat/").concat(a.id,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{n(e.data)}))})(a),className:"left-content",children:[(0,r.jsx)("div",{className:"name",children:a.title}),(0,r.jsx)("div",{className:"number",children:a.user_phone})]}),(0,r.jsxs)("div",{className:"buttons",children:[(0,r.jsx)("img",{onClick:()=>{return s=a.id,void d.A.post("".concat(e.url,"/dashboard/admin-chat/close/"),{chat_id:s},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((a=>{d.A.get("".concat(e.url,"/dashboard/admin-chat/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{i(e.data)}))}));var s},className:a.closed?"closed":"disabled",src:"./images/admin/check.png",alt:"check"}),(0,r.jsx)("img",{onClick:()=>{return s=a.id,void d.A.delete("".concat(e.url,"/dashboard/admin-chat/").concat(s,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((a=>{o(null),d.A.get("".concat(e.url,"/dashboard/admin-chat/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{i(e.data)}))}));var s},src:"./images/admin/delete.png",alt:"delete"})]})]},s)))})]}),c&&(0,r.jsxs)("div",{className:"right",children:[(0,r.jsxs)("div",{className:"top",children:[(0,r.jsx)("div",{className:"photo",children:(0,r.jsx)("img",{src:"./images/admin/user2.png",alt:""})}),(0,r.jsxs)("div",{className:"left-content",children:[(0,r.jsx)("div",{className:"name",children:c&&c.title}),(0,r.jsx)("div",{className:"number",children:c&&c.user_phone})]})]}),(0,r.jsx)("div",{ref:a,className:"body",children:(0,r.jsx)("div",{className:"scroll",children:l&&l.map(((e,a)=>(0,r.jsx)("div",{className:e.author&&e.author.is_admin?"message-my":"message-driver",children:(0,r.jsxs)("div",{className:"message",children:[e.author&&(0,r.jsxs)("div",{className:"name",children:[e.author.first_name," \u2002",e.author.last_name]}),e.message,(0,r.jsx)("div",{className:"time",children:e.time})]})},a)))})}),(0,r.jsxs)("div",{className:"bottom",children:[(0,r.jsx)("input",{value:m,onChange:e=>h(e.target.value),placeholder:"Xabar...",type:"text"}),(0,r.jsx)("div",{onClick:()=>{let a={room:c.id,message:m};d.A.post("".concat(e.url,"/dashboard/admin-message/"),a,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((a=>{h(""),d.A.get("".concat(e.url,"/dashboard/admin-chat/").concat(c.id,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{n(e.data)}))}))},className:"icon-send",children:(0,r.jsx)("img",{src:"./images/admin/message.png",alt:""})})]})]})]})},F=()=>{let e=(0,t.useContext)(X);const[a,s]=(0,t.useState)({show:!1,status:!1}),i=(0,t.useRef)(null),l=(0,t.useRef)(null),[n,c]=(0,t.useState)("male"),[o,m]=(0,t.useState)(""),[h,u]=(0,t.useState)(null),[x,v]=(0,t.useState)([]),[g,j]=(0,t.useState)(""),[p,b]=(0,t.useState)(""),[f,C]=(0,t.useState)(null),[y,z]=(0,t.useState)(!1),[S,w]=(0,t.useState)(0),q=100*S,R=Math.ceil(x.length/100),I=(0,_.Wx)({initialValues:{first_name:"",last_name:"",phone:""},validate:e=>{const a={};return e.first_name||(a.first_name="Required"),e.last_name||(a.last_name="Required"),e.phone||(a.phone="Required"),a},onSubmit:e=>{B()}});(0,t.useEffect)((()=>{F()}),[]);const F=()=>{z(!0),d.A.get("".concat(e.url,"/dashboard/client/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{v(e.data)})).finally((()=>{z(!1)}))},M=e=>{const a=e.target.files[0];C(a)},B=()=>{const a=new FormData;let i={role:"client",first_name:I.values.first_name,last_name:I.values.last_name,phone:I.values.phone,gender:n};for(let e in i)a.append(e,i[e]);f&&a.append("profile_image",f),g||d.A.post("".concat(e.url,"/dashboard/client/"),a,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{s({status:"",show:!1}),F(),I.resetForm()})),g&&d.A.patch("".concat(e.url,"/dashboard/client/").concat(g,"/"),a,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{s({status:"",show:!1}),F(),I.resetForm()}))},W=a=>{"block"===a&&p.trim().length>0?d.A.post("".concat(e.url,"/dashboard/client/block-client/"),{client_id:g,reason:p},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{s({status:"",show:!1}),F(),b("")})):alert("Bloklash sababini kiriting!"),"unblock"===a&&d.A.post("".concat(e.url,"/dashboard/client/unblock-client/"),{client_id:g},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{s({status:"",show:!1}),F()}))},L=x.slice(q,q+100).filter((e=>{const a=o.toString().toLowerCase().replace(/\s+/g,"").replace(/\+/g,""),s=e.phone.toString().toLowerCase().replace(/\s+/g,"").replace(/\+/g,"");return""===a||s.includes(a)})).map(((e,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:a+1}),(0,r.jsxs)("td",{className:"driver-wrapper",children:[(0,r.jsx)("div",{className:"icon-driver",children:(0,r.jsx)("img",{onClick:()=>{s({show:!0,status:"driver-photo"}),u(e.profile_image)},src:e.profile_image,alt:""})}),(0,r.jsx)("div",{className:"text-driver",children:(0,r.jsxs)("div",{className:"name",children:[e.first_name," \xa0",e.last_name]})})]}),(0,r.jsx)("td",{children:e.phone}),(0,r.jsx)("td",{children:e.gender}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{className:e.is_block?"icon-check":"icon-check disablet",children:[(0,r.jsx)("img",{onClick:()=>{s({show:!0,status:"blocked"}),e.is_block&&b(e.reason),j(e.id)},src:"./images/admin/block.png",alt:"block"}),e.reason&&e.is_block&&(0,r.jsxs)("div",{className:"reason-block",children:[(0,r.jsx)("img",{src:"./images/admin/warning.png",alt:""}),(0,r.jsx)("div",{className:"text",children:e.reason})]})]})}),(0,r.jsx)("td",{}),(0,r.jsx)("div",{className:"edit-icon",children:(0,r.jsx)("img",{onClick:()=>{var a;s({show:!0,status:"edit-driver"}),a=e,I.setValues({first_name:a.first_name,last_name:a.last_name,phone:a.phone}),c(a.gender),j(a.id)},src:"./images/admin/edit-tools.png",alt:""})})]},a)));return(0,r.jsxs)("div",{className:"clients-container",children:[(0,r.jsx)(N.A,{in:a.show,nodeRef:i,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,r.jsx)("div",{className:"modal-sloy",children:(0,r.jsxs)("div",{ref:i,className:"modal-card",children:["add-driver"===a.status&&(0,r.jsxs)("div",{className:"add-driver",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{s({status:"",show:!1}),I.resetForm()},src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Mijoz qo'shish"}),(0,r.jsx)("div",{className:"title-form",children:"Mijoz ma'lumotlari:"}),(0,r.jsxs)("div",{className:"form-container",children:[(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsxs)("div",{className:"select-sides-file",children:[(0,r.jsx)("input",{onChange:M,type:"file"}),(0,r.jsxs)("div",{className:"sloy-image ".concat(f?"active":""),children:["Profil rasmi",(0,r.jsx)("img",{src:"./images/admin/image.png",alt:""})]})]}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===I.errors.phone,value:I.values.phone,onChange:I.handleChange,name:"phone",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Telefon raqam",variant:"outlined",className:"textField"})})]}),(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===I.errors.first_name,value:I.values.first_name,onChange:I.handleChange,name:"first_name",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Ism",variant:"outlined",className:"textField"})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===I.errors.last_name,value:I.values.last_name,onChange:I.handleChange,name:"last_name",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Familiya",variant:"outlined",className:"textField"})})]}),(0,r.jsx)("div",{className:"select-box",children:(0,r.jsxs)("div",{className:"select-sides",children:[(0,r.jsx)("div",{className:"title-on",children:"Jinsi:"}),(0,r.jsxs)("div",{className:"on-of",children:[(0,r.jsx)("div",{onClick:()=>c("male"),className:"of ".concat("male"===n?"on":""),children:"Erkak"}),(0,r.jsx)("div",{onClick:()=>c("female"),className:"of ".concat("female"===n?"on":""),children:"Ayol"})]})]})})]}),(0,r.jsx)("div",{onClick:()=>{I.handleSubmit()},className:"add-btn",children:"Qo'shish"})]}),"driver-photo"===a.status&&(0,r.jsxs)("div",{className:"driver-photo",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>s({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"photo",children:(0,r.jsx)("img",{src:h,alt:""})})]}),"blocked"===a.status&&(0,r.jsxs)("div",{className:"blocked",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{s({status:"",show:!1}),b("")},src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Haydovchini bloklash"}),(0,r.jsxs)("div",{className:"reason-text",children:[(0,r.jsx)("textarea",{value:p,onChange:e=>b(e.target.value),placeholder:"Blok qilish sababini kiriting...",name:"reason",id:"reason"}),(0,r.jsxs)("div",{className:"buttons",children:[(0,r.jsx)("div",{onClick:()=>{W("unblock")},className:"cancel",children:"Bekor qilish"}),(0,r.jsx)("div",{onClick:()=>{W("block")},className:"success",children:"Bloklash"})]})]})]}),"edit-driver"===a.status&&(0,r.jsxs)("div",{className:"edit-driver",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{s({status:"",show:!1}),I.resetForm()},src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Mijoz ma'lumotlarini tahrirlash"}),(0,r.jsx)("div",{className:"title-form",children:"Mijoz ma'lumotlari:"}),(0,r.jsxs)("div",{className:"form-container",children:[(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsxs)("div",{className:"select-sides-file",children:[(0,r.jsx)("input",{onChange:M,type:"file"}),(0,r.jsxs)("div",{className:"sloy-image ".concat(f?"active":""),children:["Profil rasmi",(0,r.jsx)("img",{src:"./images/admin/image.png",alt:""})]})]}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===I.errors.phone,value:I.values.phone,onChange:I.handleChange,name:"phone",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Telefon raqam",variant:"outlined",className:"textField"})})]}),(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===I.errors.first_name,value:I.values.first_name,onChange:I.handleChange,name:"first_name",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Ism",variant:"outlined",className:"textField"})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===I.errors.last_name,value:I.values.last_name,onChange:I.handleChange,name:"last_name",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Familiya",variant:"outlined",className:"textField"})})]}),(0,r.jsx)("div",{className:"select-box",children:(0,r.jsxs)("div",{className:"select-sides",children:[(0,r.jsx)("div",{className:"title-on",children:"Jinsi:"}),(0,r.jsxs)("div",{className:"on-of",children:[(0,r.jsx)("div",{onClick:()=>c("male"),className:"of ".concat("male"===n?"on":""),children:"Erkak"}),(0,r.jsx)("div",{onClick:()=>c("female"),className:"of ".concat("female"===n?"on":""),children:"Ayol"})]})]})})]}),(0,r.jsx)("div",{onClick:()=>{I.handleSubmit()},className:"add-btn",children:"Saqlash"})]})]})})}),(0,r.jsxs)("div",{className:"header",children:[(0,r.jsxs)("div",{className:"search-box",children:[(0,r.jsx)("img",{src:"./images/admin/find-person.png",alt:""}),(0,r.jsx)("input",{onChange:e=>m(e.target.value),placeholder:"Telefon raqam kiriting",type:"text"})]}),(0,r.jsx)("div",{onClick:()=>{s({show:!0,status:"add-driver"})},className:"add-driver-btn",children:"Mijoz qo'shish"})]}),(0,r.jsx)("div",{className:"table-wrapper",children:y?(0,r.jsx)(T,{}):(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"\u2116"}),(0,r.jsx)("th",{children:"Mijoz haqida"}),(0,r.jsx)("th",{children:"Telefon raqam"}),(0,r.jsx)("th",{children:"Jinsi"}),(0,r.jsx)("th",{children:"Bloklash"}),(0,r.jsx)("th",{})]})}),(0,r.jsx)("tbody",{children:L})]})}),(0,r.jsx)("div",{className:"pagination",children:x.length>100?(0,r.jsx)(k(),{breakLabel:"...",previousLabel:(0,r.jsx)("img",{src:"./images/admin/prev.png",alt:""}),nextLabel:(0,r.jsx)("img",{src:"./images/admin/next.png",alt:""}),pageCount:R,onPageChange:e=>{let{selected:a}=e;w(a),setTimeout((()=>{var e;null===(e=l.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)},containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledCalassName:"paginationDisabled",activeClassName:"paginationActive"}):""})]})},M=()=>{const{t:e}=(0,v.Bd)();let a=(0,t.useContext)(X);const[s,l]=(0,t.useState)({name_uz:"",name_ru:"",name_en:""}),[n,c]=(0,t.useState)([]),[o,m]=(0,t.useState)(!1),[h,x]=(0,t.useState)(""),g=()=>{d.A.get("".concat(a.url,"/dashboard/carcolor/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{c(e.data)}))};(0,t.useEffect)((()=>{g()}),[]);const j=e=>{const{name_uz:i,name_ru:t,name_en:n}=s;if(!(i.trim()&&t.trim()&&n.trim()))return void alert("Iltimos, rang nomini kiriting");const r={uz:{name:i.trim()},ru:{name:t.trim()},en:{name:n.trim()}};"add"===e&&d.A.post("".concat(a.url,"/dashboard/carcolor/"),{translations:r},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{l({name_uz:"",name_ru:"",name_en:""}),g()})).catch((e=>{console.error("Rang qo'shishda xatolik:",e)})),"edit"===e&&d.A.put("".concat(a.url,"/dashboard/carcolor/").concat(h,"/"),{translations:r},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{l({name_uz:"",name_ru:"",name_en:""}),g(),m(!1)})).catch((e=>{console.error("Rangni tahrirlashda xatolik:",e)}))};return(0,r.jsxs)("div",{className:"colors-wrapper",children:[(0,r.jsx)("div",{className:"header",children:(0,r.jsxs)("div",{className:"form-wrapper",children:[(0,r.jsx)("input",{value:s.name_uz,onChange:e=>l((0,i.A)((0,i.A)({},s),{},{name_uz:e.target.value})),placeholder:"Rangi nomi (uz)...",type:"text"}),(0,r.jsx)("input",{value:s.name_en,onChange:e=>l((0,i.A)((0,i.A)({},s),{},{name_en:e.target.value})),placeholder:"Color name (en)...",type:"text"}),(0,r.jsx)("input",{value:s.name_ru,onChange:e=>l((0,i.A)((0,i.A)({},s),{},{name_ru:e.target.value})),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0446\u0432\u0435\u0442\u0430 (ru)...",type:"text"}),o?(0,r.jsx)("div",{onClick:()=>j("edit"),className:"add-color",children:(0,r.jsx)("img",{src:"./images/admin/checkmark.png",alt:""})}):(0,r.jsx)("div",{onClick:()=>j("add"),className:"add-color",children:(0,r.jsx)("img",{src:"./images/admin/add.png",alt:""})})]})}),(0,r.jsx)("div",{className:"colors-cards",children:(0,r.jsx)("div",{className:"wrapper-box",children:n.map(((e,s)=>(0,r.jsxs)("div",{className:"color-card",children:[(0,r.jsx)("div",{className:"name",children:e.translations[u.Ay.language].name}),(0,r.jsxs)("div",{className:"bttons",children:[(0,r.jsx)("div",{onClick:()=>(e=>{m(!0),x(e.id),l({name_uz:e.translations.uz.name||"",name_ru:e.translations.ru.name||"",name_en:e.translations.en.name||""})})(e),className:"btn",children:(0,r.jsx)("img",{src:"./images/admin/edit-tools.png",alt:""})}),(0,r.jsx)("div",{onClick:()=>{return s=e.id,void d.A.delete("".concat(a.url,"/dashboard/carcolor/").concat(s,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{l({name_uz:"",name_ru:"",name_en:""}),g(),m(!1)}));var s},className:"btn",children:(0,r.jsx)("img",{src:"./images/admin/delete.png",alt:""})})]})]},s)))})})]})},B=()=>{let e=(0,t.useContext)(X);const[a,s]=(0,t.useState)([]),[l,n]=(0,t.useState)(!1),[c,o]=(0,t.useState)(""),[m,h]=(0,t.useState)({name_uz:"",name_ru:"",name_en:""}),x=()=>{d.A.get("".concat(e.url,"/dashboard/carmake/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{s(e.data)}))};(0,t.useEffect)((()=>{x()}),[]);const v=a=>{const{name_uz:s,name_ru:i,name_en:t}=m;if(!(s.trim()&&i.trim()&&t.trim()))return void alert("Iltimos, rang nomini kiriting");const l={uz:{name:s.trim()},ru:{name:i.trim()},en:{name:t.trim()}};"add"===a&&d.A.post("".concat(e.url,"dashboard/carmake/"),{translations:l},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{h({name_uz:"",name_ru:"",name_en:""}),x()})).catch((e=>{console.error("Rang qo'shishda xatolik:",e)})),"edit"===a&&d.A.put("".concat(e.url,"dashboard/carmake/").concat(c,"/"),{translations:l},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{h({name_uz:"",name_ru:"",name_en:""}),x(),n(!1)})).catch((e=>{console.error("Rangni tahrirlashda xatolik:",e)}))};return(0,r.jsxs)("div",{className:"car-brand-wrapper",children:[(0,r.jsx)("div",{className:"header",children:(0,r.jsxs)("div",{className:"form-wrapper",children:[(0,r.jsx)("input",{value:m.name_uz,onChange:e=>h((0,i.A)((0,i.A)({},m),{},{name_uz:e.target.value})),placeholder:"Brend nomi (uz)...",type:"text"}),(0,r.jsx)("input",{value:m.name_en,onChange:e=>h((0,i.A)((0,i.A)({},m),{},{name_en:e.target.value})),placeholder:"Brand name (en)...",type:"text"}),(0,r.jsx)("input",{value:m.name_ru,onChange:e=>h((0,i.A)((0,i.A)({},m),{},{name_ru:e.target.value})),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0440\u0435\u043d\u0434\u0430 (ru)...",type:"text"}),l?(0,r.jsx)("div",{onClick:()=>v("edit"),className:"add-color",children:(0,r.jsx)("img",{src:"./images/admin/checkmark.png",alt:""})}):(0,r.jsx)("div",{onClick:()=>v("add"),className:"add-color",children:(0,r.jsx)("img",{src:"./images/admin/add.png",alt:""})})]})}),(0,r.jsx)("div",{className:"colors-cards",children:(0,r.jsx)("div",{className:"wrapper-box",children:a.map(((a,s)=>(0,r.jsxs)("div",{className:"color-card",children:[(0,r.jsx)("div",{className:"name",children:a.translations[u.Ay.language].name}),(0,r.jsxs)("div",{className:"bttons",children:[(0,r.jsx)("div",{onClick:()=>(e=>{n(!0),o(e.id),h({name_uz:e.translations.uz.name||"",name_ru:e.translations.ru.name||"",name_en:e.translations.en.name||""})})(a),className:"btn",children:(0,r.jsx)("img",{src:"./images/admin/edit-tools.png",alt:""})}),(0,r.jsx)("div",{onClick:()=>{return s=a.id,void d.A.delete("".concat(e.url,"dashboard/carmake/").concat(s,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{h({name_uz:"",name_ru:"",name_en:""}),x(),n(!1)}));var s},className:"btn",children:(0,r.jsx)("img",{src:"./images/admin/delete.png",alt:""})})]})]},s)))})})]})},W=()=>{let e=(0,t.useContext)(X);const[a,s]=(0,t.useState)({show:!1,status:!1}),i=(0,t.useRef)(null),[l,n]=(0,t.useState)([]),[c,o]=(0,t.useState)(""),m=(0,t.useRef)(null),[h,u]=(0,t.useState)([{}]),[x,v]=(0,t.useState)(0),g=100*x,j=Math.ceil(h.length/100),p=(0,_.Wx)({initialValues:{service:"",start_price:"",price_per_km:"",price_per_min:"",wait_price_per_min:"",free_wait_time:"",includedCars:""},validate:e=>{const a={};return e.service||(a.service="Required"),e.includedCars||(a.includedCars="Required"),e.start_price||(a.start_price="Required"),e.price_per_km||(a.price_per_km="Required"),e.price_per_min||(a.price_per_min="Required"),e.wait_price_per_min||(a.wait_price_per_min="Required"),e.free_wait_time||(a.free_wait_time="Required"),a},onSubmit:e=>{b()}}),b=()=>{let a={service:p.values.service,includedCars:p.values.includedCars,start_price:p.values.start_price,price_per_km:p.values.price_per_km,price_per_min:p.values.price_per_min,wait_price_per_min:p.values.wait_price_per_min,free_wait_time:p.values.free_wait_time};c||d.A.post("".concat(e.url,"/dashboard/service/"),a,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{S(),s({status:"",show:!1}),p.resetForm()})),c&&d.A.put("".concat(e.url,"/dashboard/service/").concat(c,"/"),a,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{S(),p.resetForm(),s({status:"",show:!1})}))};(0,t.useEffect)((()=>{S()}),[]);const S=()=>{d.A.get("".concat(e.url,"/dashboard/service/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{n(e.data)}))},w=l.slice(g,g+100).map(((a,i)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:i+1}),(0,r.jsx)("td",{children:a.service}),(0,r.jsx)("td",{children:a.includedCars}),(0,r.jsx)("td",{children:a.start_price}),(0,r.jsx)("td",{children:a.price_per_km}),(0,r.jsx)("td",{children:a.price_per_min}),(0,r.jsx)("td",{children:a.wait_price_per_min}),(0,r.jsx)("td",{children:a.free_wait_time}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)("img",{onClick:()=>{return s=a.id,void d.A.delete("".concat(e.url,"/dashboard/service/").concat(s,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{S()}));var s},src:"./images/admin/delete.png",alt:""})})}),(0,r.jsx)("td",{}),(0,r.jsx)("div",{className:"edit-icon",children:(0,r.jsx)("img",{onClick:()=>{return o((e=a).id),s({show:!0,status:"edit-driver"}),void p.setValues({service:e.service,start_price:e.start_price,price_per_km:e.price_per_km,price_per_min:e.price_per_min,wait_price_per_min:e.wait_price_per_min,free_wait_time:e.free_wait_time,includedCars:e.includedCars});var e},src:"./images/admin/edit-tools.png",alt:""})})]},i)));return(0,r.jsxs)("div",{className:"service-container",children:[(0,r.jsx)(N.A,{in:a.show,nodeRef:i,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,r.jsx)("div",{className:"modal-sloy",children:(0,r.jsxs)("div",{ref:i,className:"modal-card",children:["add-driver"===a.status&&(0,r.jsxs)("div",{className:"add-driver",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>s({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Tarif qo'shish"}),(0,r.jsx)("div",{className:"title-form",children:"Tarif ma'lumotlari:"}),(0,r.jsxs)("div",{className:"form-container",children:[(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Tarif nomi"}),(0,r.jsxs)(y.A,{error:"Required"===p.errors.service,labelid:"demo-select-small-label",id:"demo-select-small",value:p.values.service,label:"Tarif nomi",name:"service",onChange:p.handleChange,children:[(0,r.jsx)(z.A,{value:"standart",children:"Standart"}),(0,r.jsx)(z.A,{value:"bussiness",children:"Bussiness"}),(0,r.jsx)(z.A,{value:"comfort",children:"Comfort"})]})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===p.errors.includedCars,value:p.values.includedCars,onChange:p.handleChange,name:"includedCars",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Tarifga kiruvchi mashinalar",variant:"outlined",className:"textField"})})]}),(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===p.errors.start_price,value:p.values.start_price,onChange:p.handleChange,name:"start_price",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Boshlash narxi",variant:"outlined",className:"textField"})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===p.errors.price_per_km,value:p.values.price_per_km,onChange:p.handleChange,name:"price_per_km",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Narx (km)",variant:"outlined",className:"textField"})})]}),(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===p.errors.price_per_min,value:p.values.price_per_min,onChange:p.handleChange,name:"price_per_min",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Narx (min)",variant:"outlined",className:"textField"})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===p.errors.wait_price_per_min,value:p.values.wait_price_per_min,onChange:p.handleChange,name:"wait_price_per_min",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Kutish uchun narx (min)",variant:"outlined",className:"textField"})})]}),(0,r.jsx)("div",{className:"select-box",children:(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===p.errors.free_wait_time,value:p.values.free_wait_time,onChange:p.handleChange,name:"free_wait_time",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Tekin kutish vaqti",variant:"outlined",className:"textField"})})}),(0,r.jsx)("div",{onClick:b,className:"add-btn",children:"Tarif qo'shish"})]})]}),"edit-driver"===a.status&&(0,r.jsxs)("div",{className:"edit-driver",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>s({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Tarifni tahrirlash"}),(0,r.jsx)("div",{className:"title-form",children:"Tarif ma'lumotlari:"}),(0,r.jsxs)("div",{className:"form-container",children:[(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Tarif nomi"}),(0,r.jsxs)(y.A,{error:"Required"===p.errors.service,labelid:"demo-select-small-label",id:"demo-select-small",value:p.values.service,label:"Tarif nomi",name:"service",onChange:p.handleChange,children:[(0,r.jsx)(z.A,{value:"standart",children:"Standart"}),(0,r.jsx)(z.A,{value:"bussiness",children:"Bussiness"}),(0,r.jsx)(z.A,{value:"comfort",children:"Comfort"})]})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===p.errors.includedCars,value:p.values.includedCars,onChange:p.handleChange,name:"includedCars",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Tarifga kiruvchi mashinalar",variant:"outlined",className:"textField"})})]}),(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===p.errors.start_price,value:p.values.start_price,onChange:p.handleChange,name:"start_price",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Boshlash narxi",variant:"outlined",className:"textField"})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===p.errors.price_per_km,value:p.values.price_per_km,onChange:p.handleChange,name:"price_per_km",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Narx (km)",variant:"outlined",className:"textField"})})]}),(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===p.errors.price_per_min,value:p.values.price_per_min,onChange:p.handleChange,name:"price_per_min",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Narx (min)",variant:"outlined",className:"textField"})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===p.errors.wait_price_per_min,value:p.values.wait_price_per_min,onChange:p.handleChange,name:"wait_price_per_min",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Kutish uchun narx (min)",variant:"outlined",className:"textField"})})]}),(0,r.jsx)("div",{className:"select-box",children:(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===p.errors.free_wait_time,value:p.values.free_wait_time,onChange:p.handleChange,name:"free_wait_time",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Tekin kutish vaqti",variant:"outlined",className:"textField"})})}),(0,r.jsx)("div",{onClick:b,className:"add-btn",children:"Tasdiqlash"})]})]})]})})}),(0,r.jsx)("div",{className:"header",children:(0,r.jsx)("div",{onClick:()=>{s({show:!0,status:"add-driver"})},className:"add-driver-btn",children:"Tarif qo'shish"})}),(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"\u2116"}),(0,r.jsx)("th",{children:"Nomi"}),(0,r.jsx)("th",{children:"Moshinalar"}),(0,r.jsx)("th",{children:"Boshlash narxi"}),(0,r.jsx)("th",{children:"Narx km"}),(0,r.jsx)("th",{children:"Narx min"}),(0,r.jsx)("th",{children:"Kutish narxi min"}),(0,r.jsx)("th",{children:"Tekin kutish vaqti"}),(0,r.jsx)("th",{children:"O'chirish"}),(0,r.jsx)("th",{})]})}),(0,r.jsx)("tbody",{children:w})]}),(0,r.jsx)("div",{className:"pagination",children:h.length>100?(0,r.jsx)(k(),{breakLabel:"...",previousLabel:(0,r.jsx)("img",{src:"./images/admin/prev.png",alt:""}),nextLabel:(0,r.jsx)("img",{src:"./images/admin/next.png",alt:""}),pageCount:j,onPageChange:e=>{let{selected:a}=e;v(a),setTimeout((()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)},containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledCalassName:"paginationDisabled",activeClassName:"paginationActive"}):""})]})},L=()=>{const[e,a]=(0,t.useState)("");let s=(0,t.useContext)(X);const i=(0,t.useRef)(null),[l,n]=(0,t.useState)([]),[c,o]=(0,t.useState)(0),m=100*c;(0,t.useEffect)((()=>{d.A.get("".concat(s.url,"/dashboard/balance/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{n(e.data)}))}),[]);const h=l.slice(m,m+100).filter((a=>{const s=e.toString().toLowerCase().replace(/\s+/g,"").replace(/\+/g,""),i=a.driver.phone.toString().toLowerCase().replace(/\s+/g,"").replace(/\+/g,"");return""===s||i.includes(s)})).map(((e,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:a+1}),(0,r.jsx)("td",{className:"driver-wrapper",children:(0,r.jsxs)("div",{className:"text-driver",children:[(0,r.jsxs)("div",{className:"name",children:[e.driver&&e.driver.first_name," ",e.driver&&e.driver.last_name]}),(0,r.jsx)("div",{className:"phone",children:e.driver&&e.driver.phone})]})}),(0,r.jsx)("td",{children:e.driver&&e.driver.car_number}),(0,r.jsx)("td",{children:e.id_number}),(0,r.jsx)("td",{children:e.fund})]},a))),u=Math.ceil(l.length/100);return(0,r.jsxs)("div",{className:"balance-container",children:[(0,r.jsx)("div",{className:"header",children:(0,r.jsxs)("div",{className:"search-box",children:[(0,r.jsx)("img",{src:"./images/admin/search.png",alt:""}),(0,r.jsx)("input",{onChange:e=>a(e.target.value),placeholder:"Telefon raqam kiriting",type:"text"})]})}),(0,r.jsx)("div",{className:"table-wrapper",children:(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"\u2116"}),(0,r.jsx)("th",{children:"Haydovchi"}),(0,r.jsx)("th",{children:"Avtomobil raqami"}),(0,r.jsx)("th",{children:"Id raqam"}),(0,r.jsx)("th",{children:"Narx"})]})}),(0,r.jsx)("tbody",{children:h})]})}),(0,r.jsx)("div",{className:"pagination",children:l.length>100?(0,r.jsx)(k(),{breakLabel:"...",previousLabel:(0,r.jsx)("img",{src:"./images/admin/prev.png",alt:""}),nextLabel:(0,r.jsx)("img",{src:"./images/admin/next.png",alt:""}),pageCount:u,onPageChange:e=>{let{selected:a}=e;o(a),setTimeout((()=>{var e;null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)},containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledCalassName:"paginationDisabled",activeClassName:"paginationActive"}):""})]})},E=()=>{let e=(0,t.useContext)(X);const[a,s]=(0,t.useState)({show:!1,status:!1}),i=(0,t.useRef)(null),[l,n]=(0,t.useState)(!1),[c,o]=(0,t.useState)({}),[m,h]=(0,t.useState)([]),[x,v]=(0,t.useState)(1),[g,j]=(0,t.useState)(),[p,_]=(0,t.useState)(""),[b,k]=(0,t.useState)([]),[A,f]=(0,t.useState)(""),[C,y]=(0,t.useState)([]),[z,S]=(0,t.useState)([]),[w,q]=(0,t.useState)([]),[R,I]=(0,t.useState)(""),[F,M]=(0,t.useState)(""),[B,W]=(0,t.useState)(""),[L,E]=(0,t.useState)(""),[Q,P]=(0,t.useState)(""),[H,V]=(0,t.useState)(""),Y=[],D=m.length;if(D<=7)Y.push(...m.map(((e,a)=>a+1)));else{Y.push(1),x>3&&Y.push("...");for(let e=Math.max(2,x-1);e<=Math.min(D-1,x+1);e++)Y.push(e);x<D-2&&Y.push("..."),Y.push(D)}(0,t.useEffect)((()=>{O(),d.A.get("".concat(e.url,"/dashboard/rejectreson/?admin=true"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{k(e.data)})),d.A.get("".concat(e.url,"/dashboard/order-stats/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{S(e.data)}))}),[]);const O=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n(!0);const i=a||"".concat(e.url,"/dashboard/order/?page=").concat(s);d.A.get(i,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{y(e.data.results),o(e.data.links),h(e.data.links.pages),v(s)})).finally((()=>{n(!1)}))};return(0,r.jsxs)("div",{className:"orders-container",children:[(0,r.jsx)(N.A,{in:a.show,nodeRef:i,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,r.jsx)("div",{className:"modal-sloy",children:(0,r.jsxs)("div",{ref:i,className:"modal-card",children:["car-information"===a.status&&(0,r.jsxs)("div",{className:"car-information",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>s({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Qo'shimcha malumotlar"}),console.log(w),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Buyurtma raqami:"}),(0,r.jsx)("div",{className:"text",children:w.id})]}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Yo'nalish:"}),(0,r.jsx)("div",{className:"text",children:w.car_service.translations[u.Ay.language].name})]}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Masofa:"}),(0,r.jsx)("div",{className:"text",children:w.distance})]}),w.end_date&&(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Tugatilgan sana:"}),(0,r.jsx)("div",{className:"text",children:w.end_date})]}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Olib ketish manzili:"}),(0,r.jsx)("div",{className:"text",children:w.drop_off_locations&&w.drop_off_locations.map(((e,a)=>(0,r.jsxs)("div",{children:[" ",a+1,"- manzil : ",e.address," ",(0,r.jsx)("br",{})]},a)))})]}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Yekazish manzili:"}),(0,r.jsx)("div",{className:"text",children:w.pick_up_locations&&w.pick_up_locations.map(((e,a)=>(0,r.jsxs)("div",{children:[a+1,"- manzil : ",e.address," ",(0,r.jsx)("br",{})]},a)))})]}),w.extra_services.length>0&&(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Qo'shimcha xizmatlar:"}),(0,r.jsx)("div",{className:"text",children:w.extra_services&&w.extra_services.map(((e,a)=>(0,r.jsx)("div",{children:e.translations[u.Ay.language].name},a)))})]}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Yo'lovchilar soni:"}),(0,r.jsx)("div",{className:"text",children:w.passanger_count})]}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"To'lov turi:"}),(0,r.jsxs)("div",{className:"text",children:["cash"===w.payment_type&&"Naqt","card"===w.payment_type&&"Karta"]})]}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Olib ketish sanasi:"}),(0,r.jsx)("div",{className:"text",children:w.pick_up_date})]}),"postal"===w.car_service.service_type&&(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"To'lovni kim qiladi:"}),(0,r.jsxs)("div",{className:"text",children:["sender"===w.payer&&"Yuboruvchi","receiver"===w.payer&&"Qabul qilovchi"]})]}),"postal"===w.car_service.service_type&&(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Qabul qlivchi telefon raqami:"}),(0,r.jsx)("div",{className:"text",children:w.receiver_phone})]}),"postal"===w.car_service.service_type&&(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Yuboruvchi telefon raqami:"}),(0,r.jsx)("div",{className:"text",children:w.sender_phone})]}),"rejected"===w.status&&(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Bekor qilish sababi:"}),(0,r.jsx)("div",{className:"text",children:w.rejected_reason.translations[u.Ay.language].name})]}),w.comment_to_driver&&(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("div",{className:"title",children:"Haydovchi uchun izoh:"}),(0,r.jsx)("div",{className:"text",children:w.comment_to_driver})]})]})]}),"change-status"===a.status&&(0,r.jsxs)("div",{className:"change-status",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>s({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Buyurtma bosqichini tanlang"}),(0,r.jsxs)("div",{className:"form-box",children:[(0,r.jsxs)("select",{onChange:e=>j(e.target.value),name:"status",children:[(0,r.jsx)("option",{value:""}),(0,r.jsx)("option",{value:"arrived",children:"Mijozga kelish"}),(0,r.jsx)("option",{value:"picked",children:"Mijozni olish"}),(0,r.jsx)("option",{value:"started",children:"Boshlash"}),(0,r.jsx)("option",{value:"finished",children:"Yakunlash"}),(0,r.jsx)("option",{value:"rejected",children:"Bekor qilish"})]}),"rejected"===g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{htmlFor:"reason",children:"Bekor qilish sababini tanlang:"}),(0,r.jsxs)("select",{onChange:e=>f(e.target.value),name:"status",id:"reason",children:[(0,r.jsx)("option",{value:""}),b.map(((e,a)=>(0,r.jsx)("option",{value:e.id,children:e.translations[u.Ay.language].name},a)))]})]})]}),(0,r.jsx)("div",{onClick:()=>{d.A.post("".concat(e.url,"/dashboard/order/reject-order/"),{order_id:p,reason_id:A,status:g},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{O()}))},className:"success-btn",children:"Tasdiqlash"})]}),"statistic"===a.status&&(0,r.jsxs)("div",{className:"statistic",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>s({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Buyurtmalar statistikasi"}),(0,r.jsxs)("div",{className:"form-box",children:[(0,r.jsxs)("div",{className:"statistic-box",children:[(0,r.jsx)("div",{className:"name",children:"Umumiy:"}),(0,r.jsx)("div",{className:"num",children:z.total_orders})]}),(0,r.jsxs)("div",{className:"statistic-box",children:[(0,r.jsx)("div",{className:"name",children:"Yakunlangan:"}),(0,r.jsx)("div",{className:"num",children:z.finished_orders})]}),(0,r.jsxs)("div",{className:"statistic-box",children:[(0,r.jsx)("div",{className:"name",children:"Faol:"}),(0,r.jsx)("div",{className:"num",children:z.active_orders})]}),(0,r.jsxs)("div",{className:"statistic-box",children:[(0,r.jsx)("div",{className:"name",children:"Bekor qilingan:"}),(0,r.jsx)("div",{className:"num",children:z.rejected_orders})]}),(0,r.jsxs)("div",{className:"statistic-box",children:[(0,r.jsx)("div",{className:"name",children:"Bugungi buyurtmalar soni:"}),(0,r.jsx)("div",{className:"num",children:z.orders_today})]}),(0,r.jsxs)("div",{className:"statistic-box",children:[(0,r.jsx)("div",{className:"name",children:"Joriy oydagi buyurtmalar soni:"}),(0,r.jsx)("div",{className:"num",children:z.orders_this_month})]})]})]})]})})}),(0,r.jsx)("div",{className:"header",children:(0,r.jsxs)("div",{className:"left-side",children:[(0,r.jsx)("div",{className:"search-box",children:(0,r.jsx)("input",{value:R,onChange:e=>I(e.target.value),placeholder:"Mijoz tel raqami",type:"text"})}),(0,r.jsx)("div",{className:"search-box",children:(0,r.jsx)("input",{value:F,onChange:e=>M(e.target.value),placeholder:"Haydovchi tel raqami",type:"text"})}),(0,r.jsxs)("div",{className:"search-box",children:[(0,r.jsx)("label",{htmlFor:"direction",children:"Yo'nalish:"}),(0,r.jsxs)("select",{value:L,onChange:e=>E(e.target.value),name:"direction",id:"direction",children:[(0,r.jsx)("option",{value:""}),(0,r.jsx)("option",{value:"regional",children:"Taxi"}),(0,r.jsx)("option",{value:"postal",children:"Jo'natma"}),(0,r.jsx)("option",{value:"minivan",children:"Miniven"}),(0,r.jsx)("option",{value:"travel",children:"Sayohat"})]})]}),(0,r.jsxs)("div",{className:"search-box",children:[(0,r.jsx)("label",{htmlFor:"tarif",children:"Tarif:"}),(0,r.jsxs)("select",{value:Q,onChange:e=>P(e.target.value),name:"tarif",id:"tarif",children:[(0,r.jsx)("option",{value:""}),(0,r.jsx)("option",{value:"standart",children:"Standart"}),(0,r.jsx)("option",{value:"comfort",children:"Komfort"}),(0,r.jsx)("option",{value:"business",children:"Biznes"}),(0,r.jsx)("option",{value:"delivery",children:"Jo'natma"})]})]}),(0,r.jsxs)("div",{className:"search-box",children:[(0,r.jsx)("label",{htmlFor:"status",children:"Status:"}),(0,r.jsxs)("select",{value:B,onChange:e=>W(e.target.value),name:"status",id:"status",children:[(0,r.jsx)("option",{value:""}),(0,r.jsx)("option",{value:"rejected",children:"Bekor qilingan"}),(0,r.jsx)("option",{value:"started",children:"Boshlangan"}),(0,r.jsx)("option",{value:"arrived",children:"Mijozga keldi"}),(0,r.jsx)("option",{value:"picked",children:"Mijozni oldi"}),(0,r.jsx)("option",{value:"finished",children:"Yakunlangan"}),(0,r.jsx)("option",{value:"active",children:"Faol"})]})]}),(0,r.jsxs)("div",{className:"search-box",children:[(0,r.jsx)("label",{htmlFor:"date",children:"Sana:"}),(0,r.jsx)("input",{value:H,onChange:e=>V(e.target.value),type:"date"})]}),(0,r.jsx)("div",{onClick:()=>{n(!0);d.A.get("".concat(e.url,"/dashboard/order/?client_phone=").concat(R,"&driver_phone=").concat(F,"&service_type=").concat(L,"&category_type=").concat(Q,"&created_date=").concat(H,"&status=").concat(B),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{y(e.data.results),o(e.data.links),h(e.data.links.pages),v(1)})).finally((()=>{n(!1)}))},className:"filter-btn",children:(0,r.jsx)("img",{src:"./images/admin/panel.png",alt:""})})]})}),(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("div",{className:"left-side"}),(0,r.jsxs)("div",{onClick:()=>s({show:!0,status:"statistic"}),className:"statisitcs",children:["Statistika",(0,r.jsx)("img",{src:"./images/data-management.png",alt:"a"})]})]}),(0,r.jsx)("div",{className:"wrapper-table",children:l?(0,r.jsx)(T,{}):(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"\u2116"}),(0,r.jsx)("th",{children:"Mijoz"}),(0,r.jsx)("th",{children:"Haydovchi"}),(0,r.jsx)("th",{children:"Buyurtma berilgan sana"}),(0,r.jsx)("th",{children:"Tarif"}),(0,r.jsx)("th",{children:"Buyurtma narxi"}),(0,r.jsx)("th",{children:"Batafsil ma'lumotlar"}),(0,r.jsx)("th",{children:"Statusni ozgartirish"})]})}),(0,r.jsx)("tbody",{children:C.map(((e,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:a+1}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{className:"text-driver",children:[(0,r.jsxs)("div",{className:"name",children:[e.client.first_name," \xa0",e.client.last_name]}),(0,r.jsx)("div",{className:"phone",children:e.client.phone})]})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"text-driver",children:e.driver&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"name",children:[e.driver.first_name," \xa0",e.driver.last_name]}),(0,r.jsx)("div",{className:"phone",children:e.driver.phone})]})})}),(0,r.jsx)("td",{children:e.created_at}),(0,r.jsx)("td",{children:e.car_category.translations[u.Ay.language].name}),(0,r.jsxs)("td",{children:[e.price," so'm"]}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)("img",{onClick:()=>{q(e),s({show:!0,status:"car-information"})},src:"./images/admin/document.png",alt:""})})}),(0,r.jsx)("td",{children:"rejected"===e.status?(0,r.jsx)("div",{className:"status-red",children:"Bekor qilingan"}):"finished"===e.status?(0,r.jsx)("div",{className:"status-green",children:"Yakunlangan"}):(0,r.jsxs)("div",{className:"icon",children:[(0,r.jsxs)("div",{className:"status-blue",children:["active"===e.status&&"Faol","started"===e.status&&"Boshlandi","arrived"===e.status&&"Mijozga keldi","picked"===e.status&&"Mijozni oldi"]}),(0,r.jsx)("img",{onClick:()=>{_(e.id),s({show:!0,status:"change-status"})},className:"status-icon",src:"./images/admin/status.png",alt:""})]})})]},a)))})]})}),(0,r.jsxs)("div",{className:"pagination",children:[(0,r.jsx)("div",{onClick:()=>{x>1&&O(c.previous,x-1)},className:"prev",children:(0,r.jsx)("img",{src:"./images/admin/prev.png",alt:"Prev"})}),Y.map(((e,a)=>(0,r.jsx)("div",{onClick:()=>{"..."!==e&&O(null,e)},className:"items ".concat(x===e?"active":""," "),style:{cursor:"..."===e?"default":"pointer"},children:e},a))),(0,r.jsx)("div",{className:"next",onClick:()=>{x<D&&O(c.next,x+1)},children:(0,r.jsx)("img",{src:"./images/admin/next.png",alt:"Next"})})]})]})},Q=()=>{let e=(0,t.useContext)(X);const[a,s]=(0,t.useState)([]),[l,n]=(0,t.useState)([]),[c,o]=(0,t.useState)(""),[m,h]=(0,t.useState)(!1),[x,v]=(0,t.useState)(""),[g,j]=(0,t.useState)({name_uz:"",name_ru:"",name_en:""});(0,t.useEffect)((()=>{d.A.get("".concat(e.url,"/dashboard/carmake/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{s(e.data)}))}),[]);const p=a=>{const{name_uz:s,name_ru:i,name_en:t}=g;if(!(s.trim()&&i.trim()&&t.trim()))return void alert("Iltimos, rang nomini kiriting");const l={uz:{name:s.trim()},ru:{name:i.trim()},en:{name:t.trim()}};"add"===a&&d.A.post("".concat(e.url,"/dashboard/carmodel/"),{make:c,translations:l},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((a=>{j({name_uz:"",name_ru:"",name_en:""}),d.A.get("".concat(e.url,"/dashboard/carmake/").concat(c,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{n(e.data)}))})).catch((e=>{console.error("Rang qo'shishda xatolik:",e)})),"edit"===a&&d.A.put("".concat(e.url,"/dashboard/carmodel/").concat(x,"/"),{translations:l},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((a=>{j({name_uz:"",name_ru:"",name_en:""}),h(!1),d.A.get("".concat(e.url,"/dashboard/carmake/").concat(c,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{n(e.data)}))})).catch((e=>{console.error("Rangni tahrirlashda xatolik:",e)}))};return(0,r.jsxs)("div",{className:"car-model-wrapper",children:[(0,r.jsx)("div",{className:"header",children:(0,r.jsxs)("div",{className:"form-wrapper",children:[(0,r.jsx)("label",{htmlFor:"",children:"Moshina brendini tanlang: "}),(0,r.jsxs)("select",{onChange:a=>{o(a.target.value),d.A.get("".concat(e.url,"/dashboard/carmake/").concat(a.target.value,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{n(e.data)}))},name:"car-brand",id:"car-brand",children:[(0,r.jsx)("option",{value:""}),a.map((e=>(0,r.jsx)("option",{value:e.id,children:e.translations[u.Ay.language].name},e.id)))]}),(0,r.jsx)("input",{value:g.name_uz,onChange:e=>j((0,i.A)((0,i.A)({},g),{},{name_uz:e.target.value})),placeholder:"Avtomobil nomi (uz)...",type:"text"}),(0,r.jsx)("input",{value:g.name_en,onChange:e=>j((0,i.A)((0,i.A)({},g),{},{name_en:e.target.value})),placeholder:"Car name (en)...",type:"text"}),(0,r.jsx)("input",{value:g.name_ru,onChange:e=>j((0,i.A)((0,i.A)({},g),{},{name_ru:e.target.value})),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f (ru)...",type:"text"}),m?(0,r.jsx)("div",{onClick:()=>p("edit"),className:"add-color",children:(0,r.jsx)("img",{src:"./images/admin/checkmark.png",alt:""})}):(0,r.jsx)("div",{onClick:()=>p("add"),className:"add-color",children:(0,r.jsx)("img",{src:"./images/admin/add.png",alt:""})})]})}),(0,r.jsx)("div",{className:"colors-cards",children:(0,r.jsx)("div",{className:"wrapper-box",children:l.map(((a,s)=>(0,r.jsxs)("div",{className:"color-card",children:[(0,r.jsx)("div",{className:"name",children:a.translations[u.Ay.language].name}),(0,r.jsxs)("div",{className:"bttons",children:[(0,r.jsx)("div",{onClick:()=>(e=>{h(!0),v(e.id),j({name_uz:e.translations.uz.name||"",name_ru:e.translations.ru.name||"",name_en:e.translations.en.name||""})})(a),className:"btn",children:(0,r.jsx)("img",{src:"./images/admin/edit-tools.png",alt:""})}),(0,r.jsx)("div",{onClick:()=>{return s=a.id,void d.A.delete("".concat(e.url,"/dashboard/carmodel/").concat(s,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((a=>{j({name_uz:"",name_ru:"",name_en:""}),d.A.get("".concat(e.url,"/dashboard/carmake/").concat(c,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{n(e.data)})),h(!1)}));var s},className:"btn",children:(0,r.jsx)("img",{src:"./images/admin/delete.png",alt:""})})]})]},s)))})})]})},P=()=>{let e=(0,t.useContext)(X);const a=(0,t.useRef)(null),[s,i]=(0,t.useState)([]),[l,n]=(0,t.useState)(""),[c,o]=(0,t.useState)(0),m=100*c,[h,u]=(0,t.useState)([]),x=Math.ceil(s.length/100);(0,t.useEffect)((()=>{d.A.get("".concat(e.url,"/dashboard/payment/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{i(e.data.payment),u(e.data.statistics)}))}),[]);const v=s.slice(m,m+100).filter((e=>{const a=l.toString().toLowerCase().replace(/\s+/g,"").replace(/\+/g,""),s=e.balance_id.toString().toLowerCase().replace(/\s+/g,"").replace(/\+/g,"");return""===a||s.includes(a)})).map(((e,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:a+1}),(0,r.jsx)("td",{children:e.balance_id}),(0,r.jsx)("td",{children:e.amount}),(0,r.jsx)("td",{children:e.status}),(0,r.jsx)("td",{children:e.payment_operator}),(0,r.jsx)("td",{children:e.updated_at}),(0,r.jsx)("td",{children:e.reason})]},a)));return(0,r.jsxs)("div",{className:"payment-container",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsxs)("div",{className:"search-box",children:[(0,r.jsx)("img",{src:"./images/admin/search.png",alt:""}),(0,r.jsx)("input",{onChange:e=>n(e.target.value),placeholder:"ID kiritng",type:"text"})]}),(0,r.jsx)("div",{className:"statisitcs",children:h.length>0&&h.map(((e,a)=>(0,r.jsxs)("div",{className:"statistic-box",children:[(0,r.jsxs)("div",{className:"name",children:["refunded"===e.status&&"Qaytarilgan","waiting"===e.status&&"Kutilmoqda","confirmed"===e.status&&"Tasdiqlangan","rejected"===e.status&&"Bekor qilingan"]}),(0,r.jsx)("div",{className:"num",children:e.count})]},a)))})]}),(0,r.jsx)("div",{className:"wrapper-table",children:(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"\u2116"}),(0,r.jsx)("th",{children:"Balans id"}),(0,r.jsx)("th",{children:"Miqdor"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"To'lov turi"}),(0,r.jsx)("th",{children:"To'lov sanasi"}),(0,r.jsx)("th",{children:"Sabab"})]})}),(0,r.jsx)("tbody",{children:v})]})}),(0,r.jsx)("div",{className:"pagination",children:s.length>100?(0,r.jsx)(k(),{breakLabel:"...",previousLabel:(0,r.jsx)("img",{src:"./images/admin/prev.png",alt:""}),nextLabel:(0,r.jsx)("img",{src:"./images/admin/next.png",alt:""}),pageCount:x,onPageChange:e=>{let{selected:s}=e;o(s),setTimeout((()=>{var e;null===(e=a.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)},containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledCalassName:"paginationDisabled",activeClassName:"paginationActive"}):""})]})},H=()=>{let e=(0,t.useContext)(X);const[a,s]=(0,t.useState)([]),[l,n]=(0,t.useState)(!1),[c,o]=(0,t.useState)(""),[m,h]=(0,t.useState)(""),[x,v]=(0,t.useState)({name_uz:"",name_ru:"",name_en:""}),g=a=>{o(a),d.A.get("".concat(e.url,"/dashboard/rejectreson/?type=").concat(a),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{s(e.data)}))},j=a=>{const{name_uz:s,name_ru:i,name_en:t}=x;if(!(s.trim()&&i.trim()&&t.trim()))return void alert("Iltimos, rang nomini kiriting");const l={uz:{name:s.trim()},ru:{name:i.trim()},en:{name:t.trim()}};"add"===a&&d.A.post("".concat(e.url,"/dashboard/rejectreson/"),{type:c,translations:l},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{v({name_uz:"",name_ru:"",name_en:""}),g()})).catch((e=>{console.error("Rang qo'shishda xatolik:",e)})),"edit"===a&&d.A.put("".concat(e.url,"/dashboard/rejectreson/").concat(m,"/"),{type:c,translations:l},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{v({name_uz:"",name_ru:"",name_en:""}),g(),n(!1)})).catch((e=>{console.error("Rangni tahrirlashda xatolik:",e)}))};return(0,r.jsxs)("div",{className:"reject-reason-wrapper",children:[(0,r.jsx)("div",{className:"header",children:(0,r.jsxs)("div",{className:"form-wrapper",children:[(0,r.jsx)("label",{htmlFor:"status",children:"Moshina brendini tanlang: "}),(0,r.jsxs)("select",{onChange:e=>g(e.target.value),name:"status",id:"status",children:[(0,r.jsx)("option",{value:""}),(0,r.jsx)("option",{value:"driver",children:"Haydovchi"}),(0,r.jsx)("option",{value:"client",children:"Mijoz"}),(0,r.jsx)("option",{value:"admin",children:"Admin"})]}),(0,r.jsx)("input",{value:x.name_uz,onChange:e=>v((0,i.A)((0,i.A)({},x),{},{name_uz:e.target.value})),placeholder:"Sabab nomi (uz)...",type:"text"}),(0,r.jsx)("input",{value:x.name_en,onChange:e=>v((0,i.A)((0,i.A)({},x),{},{name_en:e.target.value})),placeholder:"Reason name (en)...",type:"text"}),(0,r.jsx)("input",{value:x.name_ru,onChange:e=>v((0,i.A)((0,i.A)({},x),{},{name_ru:e.target.value})),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u044b (ru)...",type:"text"}),l?(0,r.jsx)("div",{onClick:()=>j("edit"),className:"add-color",children:(0,r.jsx)("img",{src:"./images/admin/checkmark.png",alt:""})}):(0,r.jsx)("div",{onClick:()=>j("add"),className:"add-color",children:(0,r.jsx)("img",{src:"./images/admin/add.png",alt:""})})]})}),(0,r.jsx)("div",{className:"colors-cards",children:(0,r.jsx)("div",{className:"wrapper-box",children:a.map(((a,s)=>(0,r.jsxs)("div",{className:"color-card",children:[(0,r.jsx)("div",{className:"name",children:a.translations[u.Ay.language].name}),(0,r.jsxs)("div",{className:"bttons",children:[(0,r.jsx)("div",{onClick:()=>(e=>{n(!0),h(e.id),v({name_uz:e.translations.uz.name||"",name_ru:e.translations.ru.name||"",name_en:e.translations.en.name||""})})(a),className:"btn",children:(0,r.jsx)("img",{src:"./images/admin/edit-tools.png",alt:""})}),(0,r.jsx)("div",{onClick:()=>{return s=a.id,void d.A.delete("".concat(e.url,"/dashboard/rejectreson/").concat(s,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{v({name_uz:"",name_ru:"",name_en:""}),g(),n(!1)}));var s},className:"btn",children:(0,r.jsx)("img",{src:"./images/admin/delete.png",alt:""})})]})]},s)))})})]})},V=()=>{let e=(0,t.useContext)(X);const[a,s]=(0,t.useState)([]),[l,n]=(0,t.useState)(!1),[c,o]=(0,t.useState)(""),[m,h]=(0,t.useState)(!1),[x,v]=(0,t.useState)(""),[g,j]=(0,t.useState)({name_uz:"",name_ru:"",name_en:""}),p=()=>{d.A.get("".concat(e.url,"/dashboard/extraservices/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{s(e.data)}))};(0,t.useEffect)((()=>{p()}),[]);const N=a=>{const{name_uz:s,name_ru:i,name_en:t}=g;if(!(s.trim()&&i.trim()&&t.trim()))return void alert("Iltimos, formani toldiring");const l={uz:{name:s.trim()},ru:{name:i.trim()},en:{name:t.trim()}};"add"===a&&d.A.post("".concat(e.url,"/dashboard/extraservices/"),{is_main:m,price:x,translations:l},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{j({name_uz:"",name_ru:"",name_en:""}),h(!1),v(""),p()})).catch((e=>{console.error("Xizmat qo'shishda xatolik:",e)})),"edit"===a&&d.A.put("".concat(e.url,"/dashboard/extraservices/").concat(c,"/"),{is_main:m,price:x,translations:l},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{j({name_uz:"",name_ru:"",name_en:""}),p(),n(!1),h(!1),v("")})).catch((e=>{console.error("Rangni tahrirlashda xatolik:",e)}))};return(0,r.jsxs)("div",{className:"extra-services-wrapper",children:[(0,r.jsx)("div",{className:"header",children:(0,r.jsxs)("div",{className:"form-wrapper",children:[(0,r.jsxs)("label",{htmlFor:"ismain",className:"ismain",children:[(0,r.jsx)("div",{className:"name",children:"Asosiymi?"}),(0,r.jsx)("input",{type:"checkbox",checked:m,id:"ismain",onChange:()=>{h(!m)}})]}),(0,r.jsx)("input",{value:x,onChange:e=>v(e.target.value),placeholder:"Narx",type:"number"}),(0,r.jsx)("input",{value:g.name_uz,onChange:e=>j((0,i.A)((0,i.A)({},g),{},{name_uz:e.target.value})),placeholder:"Xizmat nomi (uz)...",type:"text"}),(0,r.jsx)("input",{value:g.name_en,onChange:e=>j((0,i.A)((0,i.A)({},g),{},{name_en:e.target.value})),placeholder:"Price name (en)...",type:"text"}),(0,r.jsx)("input",{value:g.name_ru,onChange:e=>j((0,i.A)((0,i.A)({},g),{},{name_ru:e.target.value})),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 (ru)...",type:"text"}),l?(0,r.jsx)("div",{onClick:()=>N("edit"),className:"add-color",children:(0,r.jsx)("img",{src:"./images/admin/checkmark.png",alt:""})}):(0,r.jsx)("div",{onClick:()=>N("add"),className:"add-color",children:(0,r.jsx)("img",{src:"./images/admin/add.png",alt:""})})]})}),(0,r.jsx)("div",{className:"colors-cards",children:(0,r.jsx)("div",{className:"wrapper-box",children:a.map(((a,s)=>(0,r.jsxs)("div",{className:"color-card ".concat(a.is_main&&"ismain"),children:[(0,r.jsxs)("div",{className:"name",children:[a.translations[u.Ay.language].name,": ",a.price," so'm"]}),(0,r.jsxs)("div",{className:"bttons",children:[(0,r.jsx)("div",{onClick:()=>{return e=a,n(!0),o(e.id),j({name_uz:e.translations.uz.name||"",name_ru:e.translations.ru.name||"",name_en:e.translations.en.name||""}),h(e.is_main),void v(e.price);var e},className:"btn",children:(0,r.jsx)("img",{src:"./images/admin/edit-tools.png",alt:""})}),(0,r.jsx)("div",{onClick:()=>{return s=a.id,void d.A.delete("".concat(e.url,"/dashboard/extraservices/").concat(s,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{j({name_uz:"",name_ru:"",name_en:""}),p(),n(!1)}));var s},className:"btn",children:(0,r.jsx)("img",{src:"./images/admin/delete.png",alt:""})})]})]},s)))})})]})},Y=()=>{let e=(0,t.useContext)(X);const[a,s]=(0,t.useState)({show:!1,status:!1}),i=(0,t.useRef)(null),[l,n]=(0,t.useState)([]),[c,o]=(0,t.useState)([]),[m,h]=(0,t.useState)([]),[x,v]=(0,t.useState)([]),[g,j]=(0,t.useState)(""),p=(0,t.useRef)(null),[b,S]=(0,t.useState)(0),w=50*b,q=Math.ceil(x.length/50),T=(0,_.Wx)({initialValues:{car_service:"",car_category:"",from_region:"",to_region:"",price:""},validate:e=>{const a={};return e.car_service||(a.car_service="Required"),e.car_category||(a.car_category="Required"),e.from_region||(a.from_region="Required"),e.to_region||(a.to_region="Required"),e.price||(a.price="Required"),a},onSubmit:e=>{R()}}),R=()=>{let a={car_service:T.values.car_service,car_category:T.values.car_category,from_region:T.values.from_region,to_region:T.values.to_region,price:T.values.price};g||d.A.post("".concat(e.url,"/dashboard/price/"),a,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{I(),s({status:"",show:!1}),T.resetForm()})),g&&d.A.put("".concat(e.url,"/dashboard/price/").concat(g,"/"),a,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{I(),T.resetForm(),s({status:"",show:!1})}))};(0,t.useEffect)((()=>{I(),d.A.get("".concat(e.url,"/dashboard/region/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{h(e.data)})),d.A.get("".concat(e.url,"/dashboard/carcategory/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{o(e.data)})),d.A.get("".concat(e.url,"/dashboard/carservice/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{n(e.data)}))}),[]);const I=()=>{d.A.get("".concat(e.url,"/dashboard/price/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{v(e.data)}))},F=x.slice(w,w+50).map(((a,i)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:i+1}),(0,r.jsx)("td",{children:a.car_service}),(0,r.jsx)("td",{children:a.car_category}),(0,r.jsx)("td",{children:a.from_region}),(0,r.jsx)("td",{children:a.to_region}),(0,r.jsx)("td",{children:a.price}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)("img",{onClick:()=>{return s=a.id,void d.A.delete("".concat(e.url,"/dashboard/price/").concat(s,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{I()}));var s},src:"./images/admin/delete.png",alt:""})})}),(0,r.jsx)("td",{}),(0,r.jsx)("div",{className:"edit-icon",children:(0,r.jsx)("img",{onClick:()=>{return j((e=a).id),s({show:!0,status:"edit-driver"}),void T.setValues({car_service:e.car_service,car_category:e.car_category,from_region:e.from_region,to_region:e.to_region,price:e.price});var e},src:"./images/admin/edit-tools.png",alt:""})})]},i)));return(0,r.jsxs)("div",{className:"price-container",children:[(0,r.jsx)(N.A,{in:a.show,nodeRef:i,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,r.jsx)("div",{className:"modal-sloy",children:(0,r.jsxs)("div",{ref:i,className:"modal-card",children:["add-driver"===a.status&&(0,r.jsxs)("div",{className:"add-driver",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>s({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Narx qo'shish"}),(0,r.jsxs)("div",{className:"form-container",children:[(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Yo'nalish"}),(0,r.jsx)(y.A,{error:"Required"===T.errors.car_service,labelid:"demo-select-small-label",id:"demo-select-small",value:T.values.car_service,label:"Yo'nalish",name:"car_service",onChange:T.handleChange,children:l.map(((e,a)=>(0,r.jsx)(z.A,{value:e.service_type,children:e.translations[u.Ay.language].name},a)))})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Tarif"}),(0,r.jsx)(y.A,{error:"Required"===T.errors.car_category,labelid:"demo-select-small-label",id:"demo-select-small",value:T.values.car_category,label:"Tarif",name:"car_category",onChange:T.handleChange,children:c.map(((e,a)=>(0,r.jsx)(z.A,{value:e.category_type,children:e.translations[u.Ay.language].name},a)))})]})})]}),(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Qayerdan"}),(0,r.jsx)(y.A,{error:"Required"===T.errors.from_region,labelid:"demo-select-small-label",id:"demo-select-small",value:T.values.from_region,label:"Qayerdan",name:"from_region",onChange:T.handleChange,children:m.map(((e,a)=>(0,r.jsx)(z.A,{value:e.id,children:e.translations[u.Ay.language].name},a)))})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Qayerga"}),(0,r.jsx)(y.A,{error:"Required"===T.errors.to_region,labelid:"demo-select-small-label",id:"demo-select-small",value:T.values.to_region,label:"Qayerga",name:"to_region",onChange:T.handleChange,children:m.map(((e,a)=>(0,r.jsx)(z.A,{value:e.id,children:e.translations[u.Ay.language].name},a)))})]})})]}),(0,r.jsx)("div",{className:"select-box",children:(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===T.errors.price,value:T.values.price,onChange:T.handleChange,name:"price",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Narxi",variant:"outlined",className:"textField"})})}),(0,r.jsx)("div",{onClick:R,className:"add-btn",children:"Narx qo'shish"})]})]}),"edit-driver"===a.status&&(0,r.jsxs)("div",{className:"add-driver",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>s({status:"",show:!1}),src:"./images/admin/x.png",alt:""})}),(0,r.jsx)("div",{className:"title",children:"Narxni tahrirlash"}),(0,r.jsxs)("div",{className:"form-container",children:[(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Yo'nalish"}),(0,r.jsx)(y.A,{error:"Required"===T.errors.car_service,labelid:"demo-select-small-label",id:"demo-select-small",value:T.values.car_service,label:"Yo'nalish",name:"car_service",onChange:T.handleChange,children:l.map(((e,a)=>(0,r.jsx)(z.A,{value:e.service_type,children:e.translations[u.Ay.language].name},a)))})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Tarif"}),(0,r.jsx)(y.A,{error:"Required"===T.errors.car_category,labelid:"demo-select-small-label",id:"demo-select-small",value:T.values.car_category,label:"Tarif",name:"car_category",onChange:T.handleChange,children:c.map(((e,a)=>(0,r.jsx)(z.A,{value:e.category_type,children:e.translations[u.Ay.language].name},a)))})]})})]}),(0,r.jsxs)("div",{className:"select-box",children:[(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Qayerdan"}),(0,r.jsx)(y.A,{error:"Required"===T.errors.from_region,labelid:"demo-select-small-label",id:"demo-select-small",value:T.values.from_region,label:"Qayerdan",name:"from_region",onChange:T.handleChange,children:m.map(((e,a)=>(0,r.jsx)(z.A,{value:e.id,children:e.translations[u.Ay.language].name},a)))})]})}),(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsxs)(f.A,{sx:{m:1,minWidth:"100%"},size:"small",className:"selectMui",children:[(0,r.jsx)(C.A,{id:"demo-select-large-label",children:"Qayerga"}),(0,r.jsx)(y.A,{error:"Required"===T.errors.to_region,labelid:"demo-select-small-label",id:"demo-select-small",value:T.values.to_region,label:"Qayerga",name:"to_region",onChange:T.handleChange,children:m.map(((e,a)=>(0,r.jsx)(z.A,{value:e.id,children:e.translations[u.Ay.language].name},a)))})]})})]}),(0,r.jsx)("div",{className:"select-box",children:(0,r.jsx)("div",{className:"select-sides",children:(0,r.jsx)(A.A,{error:"Required"===T.errors.price,value:T.values.price,onChange:T.handleChange,name:"price",type:"text",sx:{m:1,minWidth:"100%"},size:"small",id:"outlined-basic",label:"Narxi",variant:"outlined",className:"textField"})})}),(0,r.jsx)("div",{onClick:R,className:"add-btn",children:"Saqlash"})]})]})]})})}),(0,r.jsx)("div",{className:"header",children:(0,r.jsx)("div",{onClick:()=>{s({show:!0,status:"add-driver"})},className:"add-driver-btn",children:"Narx qo'shish"})}),(0,r.jsx)("div",{className:"table-wrapper",children:(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"\u2116"}),(0,r.jsx)("th",{children:"Yo'nalish"}),(0,r.jsx)("th",{children:"Tarif"}),(0,r.jsx)("th",{children:"Qayerdan"}),(0,r.jsx)("th",{children:"Qayerga"}),(0,r.jsx)("th",{children:"Narx"}),(0,r.jsx)("th",{children:"O'chirish"}),(0,r.jsx)("th",{})]})}),(0,r.jsx)("tbody",{children:F})]})}),(0,r.jsx)("div",{className:"pagination",children:x.length>50?(0,r.jsx)(k(),{breakLabel:"...",previousLabel:(0,r.jsx)("img",{src:"./images/admin/prev.png",alt:""}),nextLabel:(0,r.jsx)("img",{src:"./images/admin/next.png",alt:""}),pageCount:q,onPageChange:e=>{let{selected:a}=e;S(a),setTimeout((()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)},containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledCalassName:"paginationDisabled",activeClassName:"paginationActive"}):""})]})},D=[{path:"/",element:(0,r.jsx)(p,{})}],O=[{path:"/*",element:(0,r.jsx)(g,{})}],J=[{path:"/",element:(0,r.jsx)(m,{})},{path:"/drivers",element:(0,r.jsx)(R,{})},{path:"/clients",element:(0,r.jsx)(F,{})},{path:"/chat-drivers",element:(0,r.jsx)(I,{})},{path:"/colors",element:(0,r.jsx)(M,{})},{path:"/car-brands",element:(0,r.jsx)(B,{})},{path:"/car-models",element:(0,r.jsx)(Q,{})},{path:"/service",element:(0,r.jsx)(W,{})},{path:"/balance",element:(0,r.jsx)(L,{})},{path:"/orders",element:(0,r.jsx)(E,{})},{path:"/payment",element:(0,r.jsx)(P,{})},{path:"/reject-reason",element:(0,r.jsx)(H,{})},{path:"/extra-services",element:(0,r.jsx)(V,{})},{path:"/price",element:(0,r.jsx)(Y,{})}],K=()=>(0,r.jsx)("div",{className:"not-found-wrapper",children:(0,r.jsx)("div",{className:"sloy",children:(0,r.jsxs)("div",{className:"text1",children:[(0,r.jsx)("div",{className:"error",children:"error 404"}),(0,r.jsx)("div",{className:"text",children:"Page not found"})]})})}),X=(0,t.createContext)();const U=function(){const[e,a]=(0,t.useState)("https://api.adataxi.uz"),s=(0,t.useMemo)((()=>localStorage.getItem("admin")),[]),n=(0,t.useMemo)((()=>s?O:D),[s]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(X.Provider,{value:{url:e},children:(0,r.jsxs)(l.BV,{children:[n.map(((e,a)=>(0,r.jsx)(l.qh,(0,i.A)({},e),a))),(0,r.jsx)(l.qh,{path:"*",element:(0,r.jsx)(K,{})})]})})})}}}]);
//# sourceMappingURL=412.2995c577.chunk.js.map